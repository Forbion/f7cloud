"use strict";(()=>{(self.webpackChunktalk=self.webpackChunktalk||[]).push([["node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-ecDAsnUN_mjs-node_modules_nextclo-72c99b"],{83564:((P,_,a)=>{a.r(_),a.d(_,{default:()=>N});var u=a(85471),c=a(59097),m=a(21777),i=a(85168),p=a(94219),h=a(31133),f=a(82182),n=a(93095),o=a(78454);/*!
 * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */function g(s){if(s.trim()==="")return(0,n.t)("Names must not be empty.");if(s.startsWith("."))return(0,n.t)("Names must not start with a dot.");if(s.length>64)return(0,n.t)("Names may be at most 64 characters long.");try{return(0,o.KT)(s),""}catch(t){if(!(t instanceof o.di))throw t;switch(t.reason){case o.nF.Character:return(0,n.t)('"{char}" is not allowed inside a name.',{char:t.segment});case o.nF.ReservedName:return(0,n.t)('"{segment}" is a reserved name and not allowed.',{segment:t.segment});case o.nF.Extension:return t.segment.match(/\.[a-z]/i)?(0,n.t)('"{extension}" is not an allowed name.',{extension:t.segment}):(0,n.t)('Names must not end with "{extension}".',{extension:t.segment});default:return(0,n.t)("Invalid name.")}}}const E=(0,c.c0)("public").build(),v=(0,u.pM)({name:"PublicAuthPrompt",components:{NcDialog:p.A,NcNoteCard:h.A,NcTextField:f.A},props:{nickname:{type:String,default:""},title:{type:String,default:(0,n.t)("Guest identification")},text:{type:String,default:""},notice:{type:String,default:""},submitLabel:{type:String,default:(0,n.t)("Submit name")},cancellable:{type:Boolean,default:!1}},setup(){return{t:n.t}},emits:["close"],data(){return{name:""}},computed:{dialogButtons(){const s={label:(0,n.t)("Cancel"),variant:"tertiary",callback:()=>this.$emit("close")},t={label:this.submitLabel,type:"submit",variant:"primary"};return this.cancellable?[s,t]:[t]},defaultNotice(){return this.notice?this.notice:this.nickname?(0,n.t)("You are currently identified as {nickname}.",{nickname:this.nickname}):(0,n.t)("You are currently not identified.")}},watch:{nickname:{handler(){this.name=this.nickname},immediate:!0},name(){const s=this.name.trim?.()||"",t=this.$refs.input?.$el.querySelector("input");if(!t)return;const r=g(s);t.setCustomValidity(r),t.reportValidity()}},methods:{onSubmit(){const s=this.$refs.input,t=this.name.trim();if(t===""){s.setCustomValidity((0,n.t)("You cannot leave the name empty.")),s.reportValidity(),s.focus();return}if(t.length<2){s.setCustomValidity((0,n.t)("Please enter a name with at least 2 characters.")),s.reportValidity(),s.focus();return}try{(0,m.L$)(t)}catch(r){(0,i.Qg)((0,n.t)("Failed to set nickname.")),console.error("Failed to set nickname",r),s.focus();return}E.setItem("public-auth-prompt-shown","true"),this.$emit("close",this.name)}}});var l=function(){var t=this,r=t._self._c;return t._self._setupProxy,r("NcDialog",{staticClass:"public-auth-prompt",attrs:{buttons:t.dialogButtons,"data-cy-public-auth-prompt-dialog":"","is-form":"","no-close":"",name:t.title},on:{submit:t.onSubmit}},[t.text?r("p",{staticClass:"public-auth-prompt__text"},[t._v(" "+t._s(t.text)+" ")]):t._e(),r("NcNoteCard",{staticClass:"public-auth-prompt__header",attrs:{text:t.defaultNotice,type:"info"}}),r("NcTextField",{ref:"input",staticClass:"public-auth-prompt__input",attrs:{"data-cy-public-auth-prompt-dialog-name":"",label:t.t("Name"),placeholder:t.t("Enter your name"),required:!t.cancellable,minlength:"2",maxlength:"64",name:"name"},model:{value:t.name,callback:function(y){t.name=y},expression:"name"}})],1)},e=[],d=(0,n.n)(v,l,e,!1,null,"414f7090");const N=d.exports}),75217:((P,_,a)=>{a.d(_,{N:()=>v});var u=a(8990),c=a(94589),m=a(39841),i=a(418),p=a(57833),h=a(51431);(0,i.r)(i.c,i.b);const f=new Set(Object.keys(c.N.props)),n={name:"NcTextField",components:{NcIconSvgWrapper:p.N,NcInputField:c.N},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{" ":{},...c.N.props,trailingButtonLabel:{type:String,default:""},trailingButtonIcon:{type:String,default:"close",validator:l=>["close","arrowEnd","arrowRight","undo"].includes(l)}},emits:["update:value","update:modelValue","update:model-value"],setup(){return{model:(0,m.u)("value","update:value"),mdiArrowRight:u.d,mdiClose:u.c,mdiUndo:u.b}},computed:{isArrow(){return this.trailingButtonIcon==="arrowEnd"||this.trailingButtonIcon==="arrowRight"},propsAndAttrsToForward(){const l={arrowEnd:(0,i.a)("Save changes"),arrowRight:(0,i.a)("Save changes"),close:(0,i.a)("Clear text"),undo:(0,i.a)("Undo changes")};return{...this.$attrs,...Object.fromEntries(Object.entries(this.$props).filter(([e])=>f.has(e))),trailingButtonLabel:this.trailingButtonLabel||l[this.trailingButtonIcon]}}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()}}};var o=function(){var e=this,d=e._self._c;return d("NcInputField",e._g(e._b({ref:"inputField",scopedSlots:e._u([e.$scopedSlots.icon||e.$slots.default||e.$scopedSlots.default?{key:"icon",fn:function(){return[e._t("icon",function(){return[e._t("default")]})]},proxy:!0}:null,e.type!=="search"?{key:"trailing-button-icon",fn:function(){return[e.isArrow?d("NcIconSvgWrapper",{attrs:{directional:"",path:e.mdiArrowRight}}):d("NcIconSvgWrapper",{attrs:{path:e.trailingButtonIcon==="undo"?e.mdiUndo:e.mdiClose}})]},proxy:!0}:null],null,!0)},"NcInputField",e.propsAndAttrsToForward,!1),e.$listeners))},g=[],E=(0,h.n)(n,o,g,!1,null,null);const v=E.exports})}]);})();

//# sourceMappingURL=talk-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-ecDAsnUN_mjs-node_modules_nextclo-72c99b.js.map?v=6a876738deb78e1f546a