"use strict";(()=>{(self.webpackChunktalk=self.webpackChunktalk||[]).push([["defaultVendors-node_modules_nextcloud_upload_node_modules_nextcloud_dialogs_dist_chunks_FileP-6cc0eb"],{72011:(Sn,J,P)=>{P.r(J),P.d(J,{default:()=>kn});var p=P(85471),g=P(76887),$=P(21379),I=P(96769),Q=P(32981),T=P(63814),K=P(82680),Fn=!0,U=!1,xn=null,Pn=p.Ay.util.warn;function Nn(){}function $n(r,e){var t,n={},i={config:Vue.config,use:Vue.use.bind(Vue),mixin:Vue.mixin.bind(Vue),component:Vue.component.bind(Vue),provide:function(l,o){return n[l]=o,this},directive:function(l,o){return o?(Vue.directive(l,o),i):Vue.directive(l)},mount:function(l,o){return t||(t=new Vue(Object.assign({propsData:e},r,{provide:Object.assign(n,r.provide)})),t.$mount(l,o),t)},unmount:function(){t&&(t.$destroy(),t=void 0)}};return i}function In(r){return{setup(){throw new Error("[vue-demi] "+r+" is not supported in Vue 2. It's provided to avoid compiler errors.")}}}var An=null,Rn=null,Mn=null,Bn=null,Vn=null,Ln=null;function En(){return!!getCurrentInstance()}function Dn(r,e){var t;const n=shallowRef();return watchEffect(()=>{n.value=r()},{...e,flush:(t=e?.flush)!=null?t:"sync"}),readonly(n)}function On(r,e){let t,n,i;const l=ref(!0),o=()=>{l.value=!0,i()};watch(r,o,{flush:"sync"});const s=typeof e=="function"?e:e.get,u=typeof e=="function"?void 0:e.set,d=customRef((f,a)=>(n=f,i=a,{get(){return l.value&&(t=s(),l.value=!1),n(),t},set(c){u?.(c)}}));return Object.isExtensible(d)&&(d.trigger=o),d}function V(r){return getCurrentScope()?(onScopeDispose(r),!0):!1}function Tn(){const r=new Set,e=i=>{r.delete(i)};return{on:i=>{r.add(i);const l=()=>e(i);return V(l),{off:l}},off:e,trigger:(...i)=>Promise.all(Array.from(r).map(l=>l(...i)))}}function zn(r){let e=!1,t;const n=effectScope(!0);return(...i)=>(e||(t=n.run(()=>r(...i)),e=!0),t)}const L=new WeakMap,ge=(r,e)=>{var t;const n=(t=getCurrentInstance())==null?void 0:t.proxy;if(n==null)throw new Error("provideLocal must be called in setup");L.has(n)||L.set(n,Object.create(null));const i=L.get(n);i[r]=e,provide(r,e)},ye=(...r)=>{var e;const t=r[0],n=(e=getCurrentInstance())==null?void 0:e.proxy;if(n==null)throw new Error("injectLocal must be called in setup");return L.has(n)&&t in L.get(n)?L.get(n)[t]:inject(...r)};function Wn(r,e){const t=e?.injectionKey||Symbol(r.name||"InjectionState"),n=e?.defaultValue;return[(...o)=>{const s=r(...o);return ge(t,s),s},()=>ye(t,n)]}function Hn(r){let e=0,t,n;const i=()=>{e-=1,n&&e<=0&&(n.stop(),t=void 0,n=void 0)};return(...l)=>(e+=1,t||(n=effectScope(!0),t=n.run(()=>r(...l))),V(i),t)}function we(r,e,{enumerable:t=!1,unwrap:n=!0}={}){if(!(!isVue3&&!version.startsWith("2.7."))){for(const[i,l]of Object.entries(e))i!=="value"&&(isRef(l)&&n?Object.defineProperty(r,i,{get(){return l.value},set(o){l.value=o},enumerable:t}):Object.defineProperty(r,i,{value:l,enumerable:t}));return r}}function jn(r,e){return e==null?unref(r):unref(r)[e]}function Kn(r){return unref(r)!=null}function Un(r,e){if(typeof Symbol<"u"){const t={...r};return Object.defineProperty(t,Symbol.iterator,{enumerable:!1,value(){let n=0;return{next:()=>({value:e[n++],done:n>e.length})}}}),t}else return Object.assign([...e],r)}function m(r){return typeof r=="function"?r():(0,p.R1)(r)}const Yn=null;function be(r,e){const t=e?.computedGetter===!1?unref:m;return function(...n){return computed(()=>r.apply(this,n.map(i=>t(i))))}}function Zn(r,e={}){let t=[],n;if(Array.isArray(e))t=e;else{n=e;const{includeOwnProperties:i=!0}=e;t.push(...Object.keys(r)),i&&t.push(...Object.getOwnPropertyNames(r))}return Object.fromEntries(t.map(i=>{const l=r[i];return[i,typeof l=="function"?be(l.bind(r),n):l]}))}function Ce(r){if(!isRef(r))return reactive(r);const e=new Proxy({},{get(t,n,i){return unref(Reflect.get(r.value,n,i))},set(t,n,i){return isRef(r.value[n])&&!isRef(i)?r.value[n].value=i:r.value[n]=i,!0},deleteProperty(t,n){return Reflect.deleteProperty(r.value,n)},has(t,n){return Reflect.has(r.value,n)},ownKeys(){return Object.keys(r.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return reactive(e)}function X(r){return Ce(computed(r))}function Gn(r,...e){const t=e.flat(),n=t[0];return X(()=>Object.fromEntries(typeof n=="function"?Object.entries(toRefs$1(r)).filter(([i,l])=>!n(m(l),i)):Object.entries(toRefs$1(r)).filter(i=>!t.includes(i[0]))))}const z=typeof window<"u"&&typeof document<"u",Jn=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,Qn=r=>typeof r<"u",Xn=r=>r!=null,qn=(r,...e)=>{r||console.warn(...e)},ke=Object.prototype.toString,Se=r=>ke.call(r)==="[object Object]",er=()=>Date.now(),Fe=()=>+Date.now(),tr=(r,e,t)=>Math.min(t,Math.max(e,r)),E=()=>{},nr=(r,e)=>(r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r),rr=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),ir=null;function lr(){var r,e;return z&&((r=window?.navigator)==null?void 0:r.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function W(r,e){function t(...n){return new Promise((i,l)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(l)})}return t}const Y=r=>r();function q(r,e={}){let t,n,i=E;const l=s=>{clearTimeout(s),i(),i=E};return s=>{const u=m(r),d=m(e.maxWait);return t&&l(t),u<=0||d!==void 0&&d<=0?(n&&(l(n),n=null),Promise.resolve(s())):new Promise((f,a)=>{i=e.rejectOnCancel?a:f,d&&!n&&(n=setTimeout(()=>{t&&l(t),n=null,f(s())},d)),t=setTimeout(()=>{n&&l(n),n=null,f(s())},u)})}}function ee(...r){let e=0,t,n=!0,i=E,l,o,s,u,d;!isRef(r[0])&&typeof r[0]=="object"?{delay:o,trailing:s=!0,leading:u=!0,rejectOnCancel:d=!1}=r[0]:[o,s=!0,u=!0,d=!1]=r;const f=()=>{t&&(clearTimeout(t),t=void 0,i(),i=E)};return c=>{const v=m(o),h=Date.now()-e,y=()=>l=c();return f(),v<=0?(e=Date.now(),y()):(h>v&&(u||!n)?(e=Date.now(),y()):s&&(l=new Promise((_,b)=>{i=d?b:_,t=setTimeout(()=>{e=Date.now(),n=!0,_(y()),f()},Math.max(0,v-h))})),!u&&!t&&(t=setTimeout(()=>n=!0,v)),n=!1,l)}}function xe(r=Y){const e=ref(!0);function t(){e.value=!1}function n(){e.value=!0}const i=(...l)=>{e.value&&r(...l)};return{isActive:readonly(e),pause:t,resume:n,eventFilter:i}}const or={mounted:U?"mounted":"inserted",updated:U?"updated":"componentUpdated",unmounted:U?"unmounted":"unbind"};function te(r){const e=Object.create(null);return t=>e[t]||(e[t]=r(t))}const Pe=/\B([A-Z])/g,sr=te(r=>r.replace(Pe,"-$1").toLowerCase()),Ne=/-(\w)/g,ar=te(r=>r.replace(Ne,(e,t)=>t?t.toUpperCase():""));function ne(r,e=!1,t="Timeout"){return new Promise((n,i)=>{setTimeout(e?()=>i(t):n,r)})}function cr(r){return r}function ur(r){let e;function t(){return e||(e=r()),e}return t.reset=async()=>{const n=e;e=void 0,n&&await n},t}function dr(r){return r()}function $e(r,...e){return e.some(t=>t in r)}function fr(r,e){var t;if(typeof r=="number")return r+e;const n=((t=r.match(/^-?\d+\.?\d*/))==null?void 0:t[0])||"",i=r.slice(n.length),l=Number.parseFloat(n)+e;return Number.isNaN(l)?r:l+i}function pr(r,e,t=!1){return e.reduce((n,i)=>(i in r&&(!t||r[i]!==void 0)&&(n[i]=r[i]),n),{})}function vr(r,e,t=!1){return Object.fromEntries(Object.entries(r).filter(([n,i])=>(!t||i!==void 0)&&!e.includes(n)))}function mr(r){return Object.entries(r)}function H(r){return r||getCurrentInstance()}function Ie(...r){if(r.length!==1)return toRef$1(...r);const e=r[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:E}))):ref(e)}const _r=null;function hr(r,...e){const t=e.flat(),n=t[0];return X(()=>Object.fromEntries(typeof n=="function"?Object.entries(toRefs$1(r)).filter(([i,l])=>n(m(l),i)):t.map(i=>[i,Ie(r,i)])))}function gr(r,e=1e4){return customRef((t,n)=>{let i=m(r),l;const o=()=>setTimeout(()=>{i=m(r),n()},m(e));return V(()=>{clearTimeout(l)}),{get(){return t(),i},set(s){i=s,n(),clearTimeout(l),l=o()}}})}function Ae(r,e=200,t={}){return W(q(e,t),r)}function yr(r,e=200,t={}){const n=ref(r.value),i=Ae(()=>{n.value=r.value},e,t);return watch(r,()=>i()),n}function wr(r,e){return computed({get(){var t;return(t=r.value)!=null?t:e},set(t){r.value=t}})}function Re(r,e=200,t=!1,n=!0,i=!1){return W(ee(e,t,n,i),r)}function br(r,e=200,t=!0,n=!0){if(e<=0)return r;const i=ref(r.value),l=Re(()=>{i.value=r.value},e,t,n);return watch(r,()=>l()),i}function Cr(r,e={}){let t=r,n,i;const l=customRef((c,v)=>(n=c,i=v,{get(){return o()},set(h){s(h)}}));function o(c=!0){return c&&n(),t}function s(c,v=!0){var h,y;if(c===t)return;const _=t;((h=e.onBeforeChange)==null?void 0:h.call(e,c,_))!==!1&&(t=c,(y=e.onChanged)==null||y.call(e,c,_),v&&i())}return we(l,{get:o,set:s,untrackedGet:()=>o(!1),silentSet:c=>s(c,!1),peek:()=>o(!1),lay:c=>s(c,!1)},{enumerable:!0})}const kr=null;function Sr(...r){if(r.length===2){const[e,t]=r;e.value=t}if(r.length===3)if(isVue2)set$1(...r);else{const[e,t,n]=r;e[t]=n}}function j(r,e,t={}){const{eventFilter:n=Y,...i}=t;return watch(r,W(n,e),i)}function re(r,e,t={}){const{eventFilter:n,...i}=t,{eventFilter:l,pause:o,resume:s,isActive:u}=xe(n);return{stop:j(r,e,{...i,eventFilter:l}),pause:o,resume:s,isActive:u}}function Fr(r,e,...[t]){const{flush:n="sync",deep:i=!1,immediate:l=!0,direction:o="both",transform:s={}}=t||{},u=[],d="ltr"in s&&s.ltr||(c=>c),f="rtl"in s&&s.rtl||(c=>c);return(o==="both"||o==="ltr")&&u.push(re(r,c=>{u.forEach(v=>v.pause()),e.value=d(c),u.forEach(v=>v.resume())},{flush:n,deep:i,immediate:l})),(o==="both"||o==="rtl")&&u.push(re(e,c=>{u.forEach(v=>v.pause()),r.value=f(c),u.forEach(v=>v.resume())},{flush:n,deep:i,immediate:l})),()=>{u.forEach(c=>c.stop())}}function xr(r,e,t={}){const{flush:n="sync",deep:i=!1,immediate:l=!0}=t;return Array.isArray(e)||(e=[e]),watch(r,o=>e.forEach(s=>s.value=o),{flush:n,deep:i,immediate:l})}function Pr(r,e={}){if(!isRef(r))return toRefs$1(r);const t=Array.isArray(r.value)?Array.from({length:r.value.length}):{};for(const n in r.value)t[n]=customRef(()=>({get(){return r.value[n]},set(i){var l;if((l=m(e.replaceRef))!=null?l:!0)if(Array.isArray(r.value)){const s=[...r.value];s[n]=i,r.value=s}else{const s={...r.value,[n]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(r.value)),r.value=s}else r.value[n]=i}}));return t}function Nr(r,e=!0,t){H(t)?onBeforeMount(r,t):e?r():nextTick(r)}function $r(r,e){H(e)&&onBeforeUnmount(r,e)}function Ir(r,e=!0,t){H()?onMounted(r,t):e?r():nextTick(r)}function Ar(r,e){H(e)&&onUnmounted(r,e)}function Z(r,e=!1){function t(a,{flush:c="sync",deep:v=!1,timeout:h,throwOnTimeout:y}={}){let _=null;const S=[new Promise(x=>{_=watch(r,w=>{a(w)!==e&&(_?.(),x(w))},{flush:c,deep:v,immediate:!0})})];return h!=null&&S.push(ne(h,y).then(()=>m(r)).finally(()=>_?.())),Promise.race(S)}function n(a,c){if(!isRef(a))return t(w=>w===a,c);const{flush:v="sync",deep:h=!1,timeout:y,throwOnTimeout:_}=c??{};let b=null;const x=[new Promise(w=>{b=watch([r,a],([F,N])=>{e!==(F===N)&&(b?.(),w(F))},{flush:v,deep:h,immediate:!0})})];return y!=null&&x.push(ne(y,_).then(()=>m(r)).finally(()=>(b?.(),m(r)))),Promise.race(x)}function i(a){return t(c=>!!c,a)}function l(a){return n(null,a)}function o(a){return n(void 0,a)}function s(a){return t(Number.isNaN,a)}function u(a,c){return t(v=>{const h=Array.from(v);return h.includes(a)||h.includes(m(a))},c)}function d(a){return f(1,a)}function f(a=1,c){let v=-1;return t(()=>(v+=1,v>=a),c)}return Array.isArray(m(r))?{toMatch:t,toContains:u,changed:d,changedTimes:f,get not(){return Z(r,!e)}}:{toMatch:t,toBe:n,toBeTruthy:i,toBeNull:l,toBeNaN:s,toBeUndefined:o,changed:d,changedTimes:f,get not(){return Z(r,!e)}}}function Rr(r){return Z(r)}function Me(r,e){return r===e}function Mr(...r){var e;const t=r[0],n=r[1];let i=(e=r[2])!=null?e:Me;if(typeof i=="string"){const l=i;i=(o,s)=>o[l]===s[l]}return computed(()=>m(t).filter(l=>m(n).findIndex(o=>i(l,o))===-1))}function Br(r,e){return computed(()=>m(r).every((t,n,i)=>e(m(t),n,i)))}function Vr(r,e){return computed(()=>m(r).map(t=>m(t)).filter(e))}function Lr(r,e){return computed(()=>m(m(r).find((t,n,i)=>e(m(t),n,i))))}function Er(r,e){return computed(()=>m(r).findIndex((t,n,i)=>e(m(t),n,i)))}function Be(r,e){let t=r.length;for(;t-- >0;)if(e(r[t],t,r))return r[t]}function Dr(r,e){return computed(()=>m(Array.prototype.findLast?m(r).findLast((t,n,i)=>e(m(t),n,i)):Be(m(r),(t,n,i)=>e(m(t),n,i))))}function Ve(r){return Se(r)&&$e(r,"formIndex","comparator")}function Or(...r){var e;const t=r[0],n=r[1];let i=r[2],l=0;if(Ve(i)&&(l=(e=i.fromIndex)!=null?e:0,i=i.comparator),typeof i=="string"){const o=i;i=(s,u)=>s[o]===m(u)}return i=i??((o,s)=>o===m(s)),computed(()=>m(t).slice(l).some((o,s,u)=>i(m(o),m(n),s,m(u))))}function Tr(r,e){return computed(()=>m(r).map(t=>m(t)).join(m(e)))}function zr(r,e){return computed(()=>m(r).map(t=>m(t)).map(e))}function Wr(r,e,...t){const n=(i,l,o)=>e(m(i),m(l),o);return computed(()=>{const i=m(r);return t.length?i.reduce(n,m(t[0])):i.reduce(n)})}function Hr(r,e){return computed(()=>m(r).some((t,n,i)=>e(m(t),n,i)))}function Le(r){return Array.from(new Set(r))}function Ee(r,e){return r.reduce((t,n)=>(t.some(i=>e(n,i,r))||t.push(n),t),[])}function jr(r,e){return computed(()=>{const t=m(r).map(n=>m(n));return e?Ee(t,e):Le(t)})}function Kr(r=0,e={}){let t=unref(r);const n=ref(r),{max:i=Number.POSITIVE_INFINITY,min:l=Number.NEGATIVE_INFINITY}=e,o=(a=1)=>n.value=Math.max(Math.min(i,n.value+a),l),s=(a=1)=>n.value=Math.min(Math.max(l,n.value-a),i),u=()=>n.value,d=a=>n.value=Math.max(l,Math.min(i,a));return{count:n,inc:o,dec:s,get:u,set:d,reset:(a=t)=>(t=a,d(a))}}const De=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,Oe=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function Te(r,e,t,n){let i=r<12?"AM":"PM";return n&&(i=i.split("").reduce((l,o)=>l+=`${o}.`,"")),t?i.toLowerCase():i}function M(r){const e=["th","st","nd","rd"],t=r%100;return r+(e[(t-20)%10]||e[t]||e[0])}function ze(r,e,t={}){var n;const i=r.getFullYear(),l=r.getMonth(),o=r.getDate(),s=r.getHours(),u=r.getMinutes(),d=r.getSeconds(),f=r.getMilliseconds(),a=r.getDay(),c=(n=t.customMeridiem)!=null?n:Te,v={Yo:()=>M(i),YY:()=>String(i).slice(-2),YYYY:()=>i,M:()=>l+1,Mo:()=>M(l+1),MM:()=>`${l+1}`.padStart(2,"0"),MMM:()=>r.toLocaleDateString(t.locales,{month:"short"}),MMMM:()=>r.toLocaleDateString(t.locales,{month:"long"}),D:()=>String(o),Do:()=>M(o),DD:()=>`${o}`.padStart(2,"0"),H:()=>String(s),Ho:()=>M(s),HH:()=>`${s}`.padStart(2,"0"),h:()=>`${s%12||12}`.padStart(1,"0"),ho:()=>M(s%12||12),hh:()=>`${s%12||12}`.padStart(2,"0"),m:()=>String(u),mo:()=>M(u),mm:()=>`${u}`.padStart(2,"0"),s:()=>String(d),so:()=>M(d),ss:()=>`${d}`.padStart(2,"0"),SSS:()=>`${f}`.padStart(3,"0"),d:()=>a,dd:()=>r.toLocaleDateString(t.locales,{weekday:"narrow"}),ddd:()=>r.toLocaleDateString(t.locales,{weekday:"short"}),dddd:()=>r.toLocaleDateString(t.locales,{weekday:"long"}),A:()=>c(s,u),AA:()=>c(s,u,!1,!0),a:()=>c(s,u,!0),aa:()=>c(s,u,!0,!0)};return e.replace(Oe,(h,y)=>{var _,b;return(b=y??((_=v[h])==null?void 0:_.call(v)))!=null?b:h})}function We(r){if(r===null)return new Date(Number.NaN);if(r===void 0)return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){const e=r.match(De);if(e){const t=e[2]-1||0,n=(e[7]||"0").substring(0,3);return new Date(e[1],t,e[3]||1,e[4]||0,e[5]||0,e[6]||0,n)}}return new Date(r)}function Ur(r,e="HH:mm:ss",t={}){return computed(()=>ze(We(m(r)),m(e),t))}function He(r,e=1e3,t={}){const{immediate:n=!0,immediateCallback:i=!1}=t;let l=null;const o=ref(!1);function s(){l&&(clearInterval(l),l=null)}function u(){o.value=!1,s()}function d(){const f=m(e);f<=0||(o.value=!0,i&&r(),s(),l=setInterval(r,f))}if(n&&z&&d(),isRef(e)||typeof e=="function"){const f=watch(e,()=>{o.value&&z&&d()});V(f)}return V(u),{isActive:o,pause:u,resume:d}}function Yr(r=1e3,e={}){const{controls:t=!1,immediate:n=!0,callback:i}=e,l=ref(0),o=()=>l.value+=1,s=()=>{l.value=0},u=He(i?()=>{o(),i(l.value)}:o,r,{immediate:n});return t?{counter:l,reset:s,...u}:l}function Zr(r,e={}){var t;const n=ref((t=e.initialValue)!=null?t:null);return watch(r,()=>n.value=Fe(),e),n}function je(r,e,t={}){const{immediate:n=!0}=t,i=ref(!1);let l=null;function o(){l&&(clearTimeout(l),l=null)}function s(){i.value=!1,o()}function u(...d){o(),i.value=!0,l=setTimeout(()=>{i.value=!1,l=null,r(...d)},m(e))}return n&&(i.value=!0,z&&u()),V(s),{isPending:readonly(i),start:u,stop:s}}function Gr(r=1e3,e={}){const{controls:t=!1,callback:n}=e,i=je(n??E,r,e),l=computed(()=>!i.isPending.value);return t?{ready:l,...i}:l}function Jr(r,e={}){const{method:t="parseFloat",radix:n,nanToZero:i}=e;return computed(()=>{let l=m(r);return typeof l=="string"&&(l=Number[t](l,n)),i&&Number.isNaN(l)&&(l=0),l})}function Qr(r){return computed(()=>`${m(r)}`)}function Xr(r=!1,e={}){const{truthyValue:t=!0,falsyValue:n=!1}=e,i=isRef(r),l=ref(r);function o(s){if(arguments.length)return l.value=s,l.value;{const u=m(t);return l.value=l.value===u?m(n):u,l.value}}return i?o:[l,o]}function qr(r,e,t){let n=t?.immediate?[]:[...r instanceof Function?r():Array.isArray(r)?r:m(r)];return watch(r,(i,l,o)=>{const s=Array.from({length:n.length}),u=[];for(const f of i){let a=!1;for(let c=0;c<n.length;c++)if(!s[c]&&f===n[c]){s[c]=!0,a=!0;break}a||u.push(f)}const d=n.filter((f,a)=>!s[a]);e(i,n,u,d,o),n=[...i]},t)}function ei(r,e,t){const{count:n,...i}=t,l=ref(0),o=j(r,(...s)=>{l.value+=1,l.value>=m(n)&&nextTick(()=>o()),e(...s)},i);return{count:l,stop:o}}function ti(r,e,t={}){const{debounce:n=0,maxWait:i=void 0,...l}=t;return j(r,e,{...l,eventFilter:q(n,{maxWait:i})})}function ni(r,e,t){return watch(r,e,{...t,deep:!0})}function Ke(r,e,t={}){const{eventFilter:n=Y,...i}=t,l=W(n,e);let o,s,u;if(i.flush==="sync"){const d=ref(!1);s=()=>{},o=f=>{d.value=!0,f(),d.value=!1},u=watch(r,(...f)=>{d.value||l(...f)},i)}else{const d=[],f=ref(0),a=ref(0);s=()=>{f.value=a.value},d.push(watch(r,()=>{a.value++},{...i,flush:"sync"})),o=c=>{const v=a.value;c(),f.value+=a.value-v},d.push(watch(r,(...c)=>{const v=f.value>0&&f.value===a.value;f.value=0,a.value=0,!v&&l(...c)},i)),u=()=>{d.forEach(c=>c())}}return{stop:u,ignoreUpdates:o,ignorePrevAsyncUpdates:s}}function ri(r,e,t){return watch(r,e,{...t,immediate:!0})}function ii(r,e,t){const n=watch(r,(...i)=>(nextTick(()=>n()),e(...i)),t);return n}function li(r,e,t={}){const{throttle:n=0,trailing:i=!0,leading:l=!0,...o}=t;return j(r,e,{...o,eventFilter:ee(n,i,l)})}function oi(r,e,t={}){let n;function i(){if(!n)return;const f=n;n=void 0,f()}function l(f){n=f}const o=(f,a)=>(i(),e(f,a,l)),s=Ke(r,o,t),{ignoreUpdates:u}=s;return{...s,trigger:()=>{let f;return u(()=>{f=o(Ue(r),Ye(r))}),f}}}function Ue(r){return isReactive(r)?r:Array.isArray(r)?r.map(e=>m(e)):m(r)}function Ye(r){return Array.isArray(r)?r.map(()=>{}):void 0}function si(r,e,t){const n=watch(r,(i,l,o)=>{i&&(t?.once&&nextTick(()=>n()),e(i,l,o))},{...t,once:!1});return n}var ie=P(65043),Ze=P(21777),Ge=P(54914),G=P(9165),Je=P(61338),le=P(57975),oe=P(36117);const Qe={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Xe=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},qe=[],et=(0,g.a)(Qe,Xe,qe,!1,null,null,null,null);const se=et.exports,ae=()=>{var r,e,t;const n=(0,Q.C)("files","config",null),i=(0,p.KR)((r=n?.show_hidden)!=null?r:!0),l=(0,p.KR)((e=n?.sort_favorites_first)!=null?e:!0),o=(0,p.KR)((t=n?.crop_image_previews)!=null?t:!0);return(0,p.sV)(async()=>{var s,u,d,f,a,c;if((0,K.f)())console.debug("Skip loading files settings - currently on public share");else try{const{data:v}=await ie.Ay.get((0,T.Jv)("/apps/files/api/v1/configs"));i.value=(u=(s=v?.data)==null?void 0:s.show_hidden)!=null?u:!1,l.value=(f=(d=v?.data)==null?void 0:d.sort_favorites_first)!=null?f:!0,o.value=(c=(a=v?.data)==null?void 0:a.crop_image_previews)!=null?c:!0}catch(v){console.error("Could not load files settings",v),(0,g.l)((0,g.t)("Could not load files settings"))}}),{showHiddenFiles:i,sortFavoritesFirst:l,cropImagePreviews:o}},tt=r=>{var e,t,n,i,l,o,s,u,d,f,a,c;const v=F=>F==="asc"?"ascending":F==="desc"?"descending":"none",h=(0,Q.C)("files","viewConfigs",null),y=(0,p.KR)({sortBy:(t=(e=h?.files)==null?void 0:e.sorting_mode)!=null?t:"basename",order:v((i=(n=h?.files)==null?void 0:n.sorting_direction)!=null?i:"asc")}),_=(0,p.KR)({sortBy:(o=(l=h?.recent)==null?void 0:l.sorting_mode)!=null?o:"basename",order:v((u=(s=h?.recent)==null?void 0:s.sorting_direction)!=null?u:"asc")}),b=(0,p.KR)({sortBy:(f=(d=h?.favorites)==null?void 0:d.sorting_mode)!=null?f:"basename",order:v((c=(a=h?.favorites)==null?void 0:a.sorting_direction)!=null?c:"asc")});(0,p.sV)(async()=>{var F,N,D,O,C,k,R,B,de,fe,pe,ve,me,_e,he;if((0,K.f)())console.debug("Skip loading files views - currently on public share");else try{const{data:A}=await ie.Ay.get((0,T.Jv)("/apps/files/api/v1/views"));y.value={sortBy:(D=(N=(F=A?.data)==null?void 0:F.files)==null?void 0:N.sorting_mode)!=null?D:"basename",order:v((C=(O=A?.data)==null?void 0:O.files)==null?void 0:C.sorting_direction)},b.value={sortBy:(B=(R=(k=A?.data)==null?void 0:k.favorites)==null?void 0:R.sorting_mode)!=null?B:"basename",order:v((fe=(de=A?.data)==null?void 0:de.favorites)==null?void 0:fe.sorting_direction)},_.value={sortBy:(me=(ve=(pe=A?.data)==null?void 0:pe.recent)==null?void 0:ve.sorting_mode)!=null?me:"basename",order:v((he=(_e=A?.data)==null?void 0:_e.recent)==null?void 0:he.sorting_direction)}}catch(A){console.error("Could not load files views",A),(0,g.l)((0,g.t)("Could not load files views"))}});const S=(0,p.EW)(()=>m(r||"files")==="files"?y.value:m(r)==="recent"?_.value:b.value),x=(0,p.EW)(()=>S.value.sortBy),w=(0,p.EW)(()=>S.value.order);return{filesViewConfig:y,favoritesViewConfig:b,recentViewConfig:_,currentConfig:S,sortBy:x,order:w}},nt={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var rt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},it=[],lt=(0,g.a)(nt,rt,it,!1,null,null,null,null);const ot=lt.exports,st={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var at=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},ct=[],ut=(0,g.a)(st,at,ct,!1,null,null,null,null);const dt=ut.exports,ce={"file-picker__file-icon":"_file-picker__file-icon_19mjt_9"},ft=(0,p.pM)({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(r){return{__sfc:!0,fileListIconStyles:ce}}});var pt=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[e.showCheckbox?t("td",{staticClass:"row-checkbox"},[t("span")]):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"row-wrapper"},[t("span",{class:n.fileListIconStyles["file-picker__file-icon"]}),t("span")])]),e._m(0),e._m(1)])},vt=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("td",{staticClass:"row-size"},[e("span")])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("td",{staticClass:"row-modified"},[e("span")])}],mt=(0,g.a)(ft,pt,vt,!1,null,"15187afc",null,null);const _t=mt.exports;function ht(r,e={}){var t;e={size:32,cropPreview:!1,mimeFallback:!0,...e};try{const n=((t=r.attributes)==null?void 0:t.previewUrl)||(0,T.Jv)("/core/preview?fileId={fileid}",{fileid:r.fileid});let i;try{i=new URL(n)}catch{i=new URL(n,window.location.origin)}return i.searchParams.set("x","".concat(e.size)),i.searchParams.set("y","".concat(e.size)),i.searchParams.set("mimeFallback","".concat(e.mimeFallback)),i.searchParams.set("a",e.cropPreview===!0?"0":"1"),i.searchParams.set("c","".concat(r.attributes.etag)),i}catch{return null}}const gt={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var yt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},wt=[],bt=(0,g.a)(gt,yt,wt,!1,null,null,null,null);const ue=bt.exports,Ct={name:"FilePreview"},kt=(0,p.pM)({...Ct,props:{node:null,cropImagePreviews:{type:Boolean}},setup(r){const e=r,t=(0,p.KR)(ce),n=(0,p.EW)(()=>ht(e.node,{cropPreview:e.cropImagePreviews})),i=(0,p.EW)(()=>e.node.type===$.pt.File),l=(0,p.KR)(!1);return(0,p.nT)(()=>{if(l.value=!1,n.value){const o=new Image;o.src=n.value.href,o.onerror=()=>o.remove(),o.onload=()=>{l.value=!0,o.remove()}}}),{__sfc:!0,fileListIconStyles:t,props:e,previewURL:n,isFile:i,canLoadPreview:l,IconFile:se,IconFolder:ue}}});var St=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{class:n.fileListIconStyles["file-picker__file-icon"],style:n.canLoadPreview?{backgroundImage:"url(".concat(n.previewURL,")")}:void 0},[n.canLoadPreview?e._e():[n.isFile?t(n.IconFile,{attrs:{size:20}}):t(n.IconFolder,{attrs:{size:20}})]],2)},Ft=[],xt=(0,g.a)(kt,St,Ft,!1,null,null,null,null);const Pt=xt.exports,Nt=(0,p.pM)({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null,cropImagePreviews:{type:Boolean}},emits:["update:selected","enter-directory"],setup(r,{emit:e}){const t=r,n=(0,p.EW)(()=>{var f;return((f=t.node.attributes)==null?void 0:f.displayName)||t.node.basename.slice(0,t.node.extension?-t.node.extension.length:void 0)}),i=(0,p.EW)(()=>t.node.extension),l=(0,p.EW)(()=>t.node.type===$.pt.Folder),o=(0,p.EW)(()=>t.canPick&&(t.allowPickDirectory||!l.value));function s(){e("update:selected",!t.selected)}function u(){l.value?e("enter-directory",t.node):s()}function d(f){f.key==="Enter"&&u()}return{__sfc:!0,props:t,emit:e,displayName:n,fileExtension:i,isDirectory:l,isPickable:o,toggleSelected:s,handleClick:u,handleKeyDown:d,formatFileSize:$.v7,NcCheckboxRadioSwitch:I.AO,NcDateTime:I.lT,t:g.t,FilePreview:Pt}}});var $t=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("tr",e._g({class:["file-picker__row",{"file-picker__row--selected":e.selected&&!e.showCheckbox}],attrs:{tabindex:e.showCheckbox&&!n.isDirectory?void 0:0,"aria-selected":n.isPickable?e.selected:void 0,"data-filename":e.node.basename,"data-testid":"file-list-row"}},{click:n.handleClick,...!e.showCheckbox||n.isDirectory?{keydown:n.handleKeyDown}:{}}),[e.showCheckbox?t("td",{staticClass:"row-checkbox",on:{click:function(i){return i.stopPropagation(),(()=>{}).apply(null,arguments)}}},[t(n.NcCheckboxRadioSwitch,{attrs:{"aria-label":n.t("Select the row for {nodename}",{nodename:n.displayName}),checked:e.selected,disabled:!n.isPickable,"data-testid":"row-checkbox"},on:{"update:checked":n.toggleSelected}})],1):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[t(n.FilePreview,{attrs:{node:e.node,"crop-image-previews":e.cropImagePreviews}}),t("div",{staticClass:"file-picker__file-name",attrs:{title:n.displayName},domProps:{textContent:e._s(n.displayName)}}),t("div",{staticClass:"file-picker__file-extension",domProps:{textContent:e._s(n.fileExtension)}})],1)]),t("td",{staticClass:"row-size"},[e._v(" "+e._s(n.formatFileSize(e.node.size||0))+" ")]),t("td",{staticClass:"row-modified"},[t(n.NcDateTime,{attrs:{timestamp:e.node.mtime,"ignore-seconds":!0}})],1)])},It=[],At=(0,g.a)(Nt,$t,It,!1,null,"cb12dccb",null,null);const Rt=At.exports,Mt=(0,p.pM)({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(r,{emit:e}){const t=r,n=(0,p.KR)(),{currentConfig:i}=tt(t.currentView),l=(0,p.EW)(()=>{var w;return(w=n.value)!=null?w:i.value}),o=(0,p.EW)(()=>l.value.sortBy==="basename"?l.value.order==="none"?void 0:l.value.order:void 0),s=(0,p.EW)(()=>l.value.sortBy==="size"?l.value.order==="none"?void 0:l.value.order:void 0),u=(0,p.EW)(()=>l.value.sortBy==="mtime"?l.value.order==="none"?void 0:l.value.order:void 0),d=w=>{l.value.sortBy===w?l.value.order==="ascending"?n.value={sortBy:l.value.sortBy,order:"descending"}:n.value={sortBy:l.value.sortBy,order:"ascending"}:n.value={sortBy:w,order:"ascending"}},{sortFavoritesFirst:f,cropImagePreviews:a}=ae(),c=(0,p.EW)(()=>(0,$.ur)(t.files,{sortFoldersFirst:!0,sortFavoritesFirst:f.value,sortingOrder:l.value.order==="descending"?"desc":"asc",sortingMode:l.value.sortBy})),v=(0,p.EW)(()=>t.files.filter(w=>t.allowPickDirectory||w.type!==$.pt.Folder)),h=(0,p.EW)(()=>!t.loading&&t.selectedFiles.length>0&&t.selectedFiles.length>=v.value.length);function y(){t.selectedFiles.length<v.value.length?e("update:selectedFiles",v.value):e("update:selectedFiles",[])}function _(w){t.selectedFiles.includes(w)?e("update:selectedFiles",t.selectedFiles.filter(F=>F.path!==w.path)):t.multiselect?e("update:selectedFiles",[...t.selectedFiles,w]):e("update:selectedFiles",[w])}function b(w){e("update:path",w.path)}const S=(0,p.KR)(4),x=(0,p.KR)();{const w=()=>(0,p.dY)(()=>{var F,N,D,O,C;const k=((N=(F=x.value)==null?void 0:F.parentElement)==null?void 0:N.children)||[];let R=((O=(D=x.value)==null?void 0:D.parentElement)==null?void 0:O.clientHeight)||450;for(let B=0;B<k.length;B++)(C=x.value)!=null&&C.isSameNode(k[B])||(R-=k[B].clientHeight);S.value=Math.max(1,Math.floor((R-50)/50))});(0,p.sV)(()=>{window.addEventListener("resize",w),w()}),(0,p.hi)(()=>{window.removeEventListener("resize",w)})}return{__sfc:!0,props:t,emit:e,customSortingConfig:n,filesAppSorting:i,sortingConfig:l,sortByName:o,sortBySize:s,sortByModified:u,toggleSorting:d,sortFavoritesFirst:f,cropImagePreviews:a,sortedFiles:c,selectableFiles:v,allSelected:h,onSelectAll:y,onNodeSelected:_,onChangeDirectory:b,skeletonNumber:S,fileContainer:x,NcButton:I.x1,NcCheckboxRadioSwitch:I.AO,t:g.t,IconSortAscending:ot,IconSortDescending:dt,LoadingTableRow:_t,FileListRow:Rt}}});var Bt=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"fileContainer",staticClass:"file-picker__files"},[t("table",[t("thead",[t("tr",[e.multiselect?t("th",{staticClass:"row-checkbox"},[t("span",{staticClass:"hidden-visually"},[e._v(" "+e._s(n.t("Select entry"))+" ")]),e.multiselect?t(n.NcCheckboxRadioSwitch,{attrs:{"aria-label":n.t("Select all entries"),checked:n.allSelected,"data-testid":"select-all-checkbox"},on:{"update:checked":n.onSelectAll}}):e._e()],1):e._e(),t("th",{staticClass:"row-name",attrs:{"aria-sort":n.sortByName}},[t("div",{staticClass:"header-wrapper"},[t("span",{staticClass:"file-picker__header-preview"}),t(n.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(i){return n.toggleSorting("basename")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n.sortByName==="ascending"?t(n.IconSortAscending,{attrs:{size:20}}):n.sortByName==="descending"?t(n.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(n.t("Name"))+" ")])],1)]),t("th",{staticClass:"row-size",attrs:{"aria-sort":n.sortBySize}},[t(n.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(i){return n.toggleSorting("size")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n.sortBySize==="ascending"?t(n.IconSortAscending,{attrs:{size:20}}):n.sortBySize==="descending"?t(n.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(n.t("Size"))+" ")])],1),t("th",{staticClass:"row-modified",attrs:{"aria-sort":n.sortByModified}},[t(n.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(i){return n.toggleSorting("mtime")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n.sortByModified==="ascending"?t(n.IconSortAscending,{attrs:{size:20}}):n.sortByModified==="descending"?t(n.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(n.t("Modified"))+" ")])],1)])]),t("tbody",[e.loading?e._l(n.skeletonNumber,function(i){return t(n.LoadingTableRow,{key:i,attrs:{"show-checkbox":e.multiselect}})}):e._l(n.sortedFiles,function(i){return t(n.FileListRow,{key:i.fileid||i.path,attrs:{"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":e.multiselect||e.selectedFiles.length===0||e.selectedFiles.includes(i),selected:e.selectedFiles.includes(i),node:i,"crop-image-previews":n.cropImagePreviews},on:{"update:selected":function(l){return n.onNodeSelected(i)},"enter-directory":n.onChangeDirectory}})})],2)])])},Vt=[],Lt=(0,g.a)(Mt,Bt,Vt,!1,null,"006fdbd0",null,null);const Et=Lt.exports,Dt={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ot=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Tt=[],zt=(0,g.a)(Dt,Ot,Tt,!1,null,null,null,null);const Wt=zt.exports,Ht={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var jt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Kt=[],Ut=(0,g.a)(Ht,jt,Kt,!1,null,null,null,null);const Yt=Ut.exports,Zt=(0,p.pM)({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(r,{emit:e}){const t=r,n=(0,p.KR)(!1),i=(0,p.KR)(""),l=(0,p.KR)();function o(){var d,f,a,c;const v=i.value.trim(),h=(f=(d=l.value)==null?void 0:d.$el)==null?void 0:f.querySelector("input");let y="";return v.length===0?y=(0,g.t)("Folder name cannot be empty."):v.includes("/")?y=(0,g.t)('"/" is not allowed inside a folder name.'):["..","."].includes(v)?y=(0,g.t)('"{name}" is an invalid folder name.',{name:v}):(a=window.OC.config)!=null&&a.blacklist_files_regex&&v.match((c=window.OC.config)==null?void 0:c.blacklist_files_regex)&&(y=(0,g.t)('"{name}" is not an allowed folder name',{name:v})),h&&h.setCustomValidity(y),y===""}const s=function(){const d=i.value.trim();o()&&(n.value=!1,e("create-node",d),i.value="")},u=(0,p.EW)(()=>t.path.split("/").filter(d=>d!=="").map((d,f,a)=>({name:d,path:"/"+a.slice(0,f+1).join("/")})));return{__sfc:!0,props:t,emit:e,actionsOpen:n,newNodeName:i,nameInput:l,validateInput:o,onSubmit:s,pathElements:u,IconFolder:ue,IconHome:Wt,IconPlus:Yt,NcActions:I.B6,NcActionInput:I.Az,NcBreadcrumbs:I.Qz,NcBreadcrumb:I.R1,t:g.t}}});var Gt=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:e._u([{key:"default",fn:function(){return[t(n.NcBreadcrumb,{attrs:{name:n.t("All files"),title:n.t("Home")},on:{click:function(i){return n.emit("update:path","/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.IconHome,{attrs:{size:20}})]},proxy:!0}])}),e._l(n.pathElements,function(i){return t(n.NcBreadcrumb,{key:i.path,attrs:{name:i.name,title:i.path},on:{click:function(l){return n.emit("update:path",i.path)}}})})]},proxy:!0},e.showMenu?{key:"actions",fn:function(){return[t(n.NcActions,{attrs:{"aria-label":n.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":n.t("New"),open:n.actionsOpen,type:"secondary"},on:{"update:open":function(i){n.actionsOpen=i},close:function(i){n.newNodeName=""}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[t(n.NcActionInput,{ref:"nameInput",attrs:{value:n.newNodeName,label:n.t("New folder"),placeholder:n.t("New folder name")},on:{"update:value":function(i){n.newNodeName=i},submit:n.onSubmit,input:n.validateInput},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})},Jt=[],Qt=(0,g.a)(Zt,Gt,Jt,!1,null,"b357227a",null,null);const Xt=Qt.exports,qt={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var en=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},tn=[],nn=(0,g.a)(qt,en,tn,!1,null,null,null,null);const rn=nn.exports,ln={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var on=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(n){return e.$emit("click",n)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},sn=[],an=(0,g.a)(ln,on,sn,!1,null,null,null,null);const cn=an.exports,un=r=>{const e=[{id:"files",label:(0,g.t)("All files"),icon:G.fEr},{id:"recent",label:(0,g.t)("Recent"),icon:G.NZC},{id:"favorites",label:(0,g.t)("Favorites"),icon:G.ZL5}],t=r.value?e.filter(({id:n})=>n==="files"):e;return{allViews:e,availableViews:t}},dn=(0,p.pM)({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(r,{emit:e}){const t=r,{availableViews:n}=un((0,p.KR)((0,Ze.HW)()===null)),i=(0,p.EW)(()=>{var o;return(o=n.filter(s=>s.id===t.currentView)[0])!=null?o:n[0]});return{__sfc:!0,props:t,emit:e,availableViews:n,currentViewObject:i,updateFilterValue:o=>e("update:filterString",o),IconClose:rn,IconMagnify:cn,NcButton:I.x1,NcIconSvgWrapper:I.K1,NcSelect:I.EQ,NcTextField:I.v,Fragment:Ge.F,t:g.t}}});var fn=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Fragment,[t(n.NcTextField,{staticClass:"file-picker__filter-input",attrs:{value:e.filterString,label:n.t("Filter file list"),"show-trailing-button":!!e.filterString},on:{"update:value":n.updateFilterValue,"trailing-button-click":function(i){return n.updateFilterValue("")}},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[t(n.IconClose,{attrs:{size:16}})]},proxy:!0}])},[t(n.IconMagnify,{attrs:{size:16}})],1),n.availableViews.length>1&&!e.disabledNavigation?[e.isCollapsed?t(n.NcSelect,{attrs:{"aria-label":n.t("Current view selector"),clearable:!1,searchable:!1,options:n.availableViews,value:n.currentViewObject},on:{input:i=>n.emit("update:currentView",i.id)}}):t("ul",{staticClass:"file-picker__side"},e._l(n.availableViews,function(i){return t("li",{key:i.id},[t(n.NcButton,{attrs:{type:e.currentView===i.id?"primary":"tertiary",wide:!0},on:{click:function(l){return e.$emit("update:currentView",i.id)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.NcIconSvgWrapper,{attrs:{path:i.icon,size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(i.label)+" ")])],1)}),0)]:e._e()],2)},pn=[],vn=(0,g.a)(dn,fn,pn,!1,null,"b42054b8",null,null);const mn=vn.exports,_n=function(r,e){const t=(0,K.f)(),n=t?"/":$.lJ,i=(0,p.EW)(()=>t?(0,T.dC)("webdav").replace("/remote.php","/public.php"):$.PY),l=(0,p.EW)(()=>{if(t){const _=document.getElementById("sharingToken").value,b=btoa("".concat(_,":null"));return(0,$.H4)(i.value,{Authorization:"Basic ".concat(b)})}return(0,$.H4)()}),o=_=>(0,$.Al)(_,n,i.value),s=()=>{const _=new AbortController,b=Math.round(Date.now()/1e3)-60*60*24*14;return new oe.CancelablePromise(async(S,x,w)=>{w(()=>_.abort());try{const{data:F}=await l.value.search("/",{signal:_.signal,details:!0,data:(0,$.R3)(b)}),N=F.results.map(o);S(N)}catch(F){x(F)}})},u=()=>{const _=new AbortController;return new oe.CancelablePromise(async(b,S,x)=>{x(()=>_.abort());try{const F=(await l.value.getDirectoryContents("".concat(n).concat(e.value),{signal:_.signal,details:!0,includeSelf:!0,data:(0,$.VL)()})).data.map(o);b({folder:F.find(N=>N.path===e.value),contents:F.filter(N=>N.path!==e.value)})}catch(w){S(w)}})},d=(0,p.IJ)([]),f=(0,p.IJ)(null),a=(0,p.KR)(!0),c=(0,p.KR)(null);async function v(_){const b=(0,le.join)(e.value,_);await l.value.createDirectory((0,le.join)(n,b));const S=await h(b);return d.value=[...d.value,S],S}async function h(_,b=void 0){b=b??n;const{data:S}=await l.value.stat("".concat(b).concat(_),{details:!0,data:(0,$.VL)()});return o(S)}async function y(){c.value&&c.value.cancel(),a.value=!0,r.value==="favorites"?c.value=(0,$.Q$)(l.value,e.value,n):r.value==="recent"?c.value=s():c.value=u();const _=await c.value;"folder"in _?(f.value=_.folder,d.value=_.contents):(f.value=null,d.value=_),c.value=null,a.value=!1}return(0,p.wB)([r,e],()=>y()),(0,p.sV)(()=>y()),{isLoading:a,files:d,folder:f,loadFiles:y,createDirectory:v}},hn=function(r){const e=(0,p.EW)(()=>r.value.map(n=>n.split("/")));return{isSupportedMimeType:n=>{const i=n.split("/");return e.value.some(([l,o])=>(i[0]===l||l==="*")&&(i[1]===o||o==="*"))}}},gn={name:"FilePicker"},yn=(0,p.pM)({...gn,props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:void 0}},emits:["close"],setup(r,{emit:e}){const t=r,n=(0,p.KR)(!0),i=(0,p.EW)(()=>{const C=d.value.length===0&&t.allowPickDirectory&&_.value?[_.value]:d.value;return(typeof t.buttons=="function"?t.buttons(C,c.value,s.value):t.buttons).map(R=>({...R,disabled:R.disabled||b.value,callback:()=>{l=!0,o(R.callback,C)}}))});let l=!1;const o=async(C,k)=>{C(k),e("close",k),l=!1},s=(0,p.KR)("files"),u=(0,p.EW)(()=>s.value==="favorites"?(0,g.t)("Favorites"):s.value==="recent"?(0,g.t)("Recent"):""),d=(0,p.IJ)([]),f=(0,p.KR)(window?.sessionStorage.getItem("NC.FilePicker.LastPath")||"/"),a=(0,p.KR)("");(0,p.wB)([a],()=>{t.path===void 0&&a.value&&window.sessionStorage.setItem("NC.FilePicker.LastPath",a.value),d.value=[]});const c=(0,p.EW)({get:()=>s.value==="files"?a.value||t.path||f.value:"/",set:C=>{a.value=C}}),v=(0,p.KR)(""),{isSupportedMimeType:h}=hn((0,p.lW)(t,"mimetypeFilter")),{files:y,folder:_,isLoading:b,loadFiles:S,createDirectory:x}=_n(s,c);(0,p.sV)(()=>S());const{showHiddenFiles:w}=ae(),F=(0,p.EW)(()=>{let C=y.value;return w.value||(C=C.filter(k=>!k.basename.startsWith("."))),t.mimetypeFilter.length>0&&(C=C.filter(k=>k.type==="folder"||k.mime&&h(k.mime))),v.value&&(C=C.filter(k=>k.basename.toLowerCase().includes(v.value.toLowerCase()))),t.filterFn&&(C=C.filter(k=>t.filterFn(k))),C}),N=(0,p.EW)(()=>s.value==="files"?(0,g.t)("Upload some content or sync with your devices!"):s.value==="recent"?(0,g.t)("Files and folders you recently modified will show up here."):(0,g.t)("Files and folders you mark as favorite will show up here."));return{__sfc:!0,props:t,emit:e,isOpen:n,dialogButtons:i,isHandlingCallback:l,handleButtonClick:o,currentView:s,viewHeadline:u,selectedFiles:d,savedPath:f,navigatedPath:a,currentPath:c,filterString:v,isSupportedMimeType:h,files:y,currentFolder:_,isLoading:b,loadFiles:S,createDirectory:x,showHiddenFiles:w,filteredFiles:F,noFilesDescription:N,onCreateFolder:async C=>{try{const k=await x(C);a.value=k.path,(0,Je.Ic)("files:node:created",y.value.filter(R=>R.basename===C)[0])}catch(k){console.warn("Could not create new folder",{name:C,error:k}),(0,g.l)((0,g.t)("Could not create the new folder"))}},handleClose:C=>{!C&&!l&&e("close")},IconFile:se,FileList:Et,FilePickerBreadcrumbs:Xt,FilePickerNavigation:mn,NcDialog:I.i$,NcEmptyContent:I.yI,t:g.t}}});var wn=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.NcDialog,{attrs:{container:e.container,buttons:n.dialogButtons,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation",open:n.isOpen},on:{"update:open":[function(i){n.isOpen=i},n.handleClose]},scopedSlots:e._u([{key:"navigation",fn:function({isCollapsed:i}){return[t(n.FilePickerNavigation,{attrs:{"is-collapsed":i,"current-view":n.currentView,"filter-string":n.filterString,"disabled-navigation":e.disabledNavigation},on:{"update:currentView":function(l){n.currentView=l},"update:current-view":function(l){n.currentView=l},"update:filterString":function(l){n.filterString=l},"update:filter-string":function(l){n.filterString=l}}})]}}])},[t("div",{staticClass:"file-picker__main"},[n.currentView==="files"?t(n.FilePickerBreadcrumbs,{attrs:{path:n.currentPath,"show-menu":e.allowPickDirectory},on:{"update:path":function(i){n.currentPath=i},"create-node":n.onCreateFolder}}):t("div",{staticClass:"file-picker__view"},[t("h3",[e._v(e._s(n.viewHeadline))])]),n.isLoading||n.filteredFiles.length>0?t(n.FileList,{attrs:{"allow-pick-directory":e.allowPickDirectory,"current-view":n.currentView,files:n.filteredFiles,multiselect:e.multiselect,loading:n.isLoading,path:n.currentPath,"selected-files":n.selectedFiles,name:n.viewHeadline},on:{"update:path":[function(i){n.currentPath=i},function(i){n.currentView="files"}],"update:selectedFiles":function(i){n.selectedFiles=i},"update:selected-files":function(i){n.selectedFiles=i}}}):n.filterString?t(n.NcEmptyContent,{attrs:{name:n.t("No matching files"),description:n.t("No files matching your filter were found.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.IconFile)]},proxy:!0}])}):t(n.NcEmptyContent,{attrs:{name:n.t("No files in here"),description:n.noFilesDescription},scopedSlots:e._u([{key:"icon",fn:function(){return[t(n.IconFile)]},proxy:!0}])})],1)])},bn=[],Cn=(0,g.a)(yn,wn,bn,!1,null,"20b719ba",null,null);const kn=Cn.exports}}]);})();

//# sourceMappingURL=talk-defaultVendors-node_modules_nextcloud_upload_node_modules_nextcloud_dialogs_dist_chunks_FileP-6cc0eb.js.map?v=f3621422039c894b3ae6