"use strict";(()=>{(self.webpackChunktalk=self.webpackChunktalk||[]).push([["node_modules_nextcloud_upload_dist_chunks_InvalidFilenameDialog-B_BCSatD_mjs-node_modules_nex-b03463"],{69905:((f,d,t)=>{t.d(d,{A:()=>m});var l=t(71354),o=t.n(l),c=t(76314),s=t.n(c),u=s()(o());u.push([f.id,`
.invalid-filename-dialog__input[data-v-9d7d9a49] {
	/* Ensure the helper text can always be shown without jumping */
	min-height: calc(var(--default-clickable-area) + 4 * var(--default-font-size));
}
`,"",{version:3,sources:["webpack://./node_modules/@nextcloud/upload/dist/assets/InvalidFilenameDialog-DKMLP0ER.css"],names:[],mappings:";AACA;CACC,+DAA+D;CAC/D,8EAA8E;AAC/E",sourcesContent:[`
.invalid-filename-dialog__input[data-v-9d7d9a49] {
	/* Ensure the helper text can always be shown without jumping */
	min-height: calc(var(--default-clickable-area) + 4 * var(--default-font-size));
}
`],sourceRoot:""}]);const m=u}),44209:((f,d,t)=>{t.r(d),t.d(d,{default:()=>x});var l=t(85072),o=t.n(l),c=t(97825),s=t.n(c),u=t(77659),m=t.n(u),p=t(55056),g=t.n(p),E=t(10540),_=t.n(E),A=t(41113),D=t.n(A),r=t(69905),e={};e.styleTagTransform=D(),e.setAttributes=g(),e.insert=m().bind(null,"head"),e.domAPI=s(),e.insertStyleElement=_();var h=o()(r.A,e);const O=r.A&&r.A.locals?r.A.locals:void 0;var v=t(78454),I=t(85471),i=t(9206),C=t(94219),T=t(82182),F=t(31133);const P=(0,I.pM)({components:{NcDialog:C.A,NcNoteCard:F.A,NcTextField:T.A},props:{error:{type:v.di,required:!0},validateFilename:{type:Function,required:!0}},setup(){return{t:i.t}},data(){return{newName:"",validationError:""}},computed:{isValidName(){return this.validationError===""},isInvalidFileType(){return this.error.reason===v.nF.Extension&&this.error.segment.match(/^\.\w/)!==null},canRename(){return!this.isInvalidFileType},dialogButtons(){const a=[{label:(0,i.t)("Cancel"),type:"error",callback:()=>{this.$emit("close",{cancel:!0})}},{label:(0,i.t)("Skip"),callback:()=>{this.$emit("close",{skip:!0})}}];return this.canRename&&a.push({label:(0,i.t)("Rename"),type:"primary",disabled:!this.isValidName,callback:()=>{this.$emit("close",{rename:this.newName.trimEnd()})}}),a}},watch:{error:{handler(){this.validationError=this.getErrorText(this.error),this.newName=this.error.filename},immediate:!0},newName(){try{this.validateFilename(this.newName.trimEnd()),this.validationError=""}catch(a){this.validationError=this.getErrorText(a)}finally{const a=this.$refs.textfield?.$el.querySelector("input");a&&(a.setCustomValidity(this.validationError),a.reportValidity())}}},methods:{getErrorText(a){switch(a.reason){case v.nF.Character:return(0,i.t)('"{segment}" is not allowed inside a file or folder name.',{segment:a.segment});case v.nF.ReservedName:return(0,i.t)('"{segment}" is a forbidden file or folder name.',{segment:a.segment});case v.nF.Extension:return a.segment.match(/\.\w/)?(0,i.t)('"{segment}" is a forbidden file type.',{segment:a.segment}):(0,i.t)('Filenames must not end with "{segment}".',{segment:a.segment})}}}});var R=function(){var n=this,N=n._self._c;return n._self._setupProxy,N("NcDialog",{attrs:{buttons:n.dialogButtons,name:n.t("Invalid filename")},on:{close:function(y){return n.$emit("close",{cancel:!0})}}},[N("NcNoteCard",{attrs:{severity:"error"}},[n._v(" "+n._s(n.getErrorText(n.error))+" "+n._s(n.t("You can either rename the file, skip this file or cancel the whole operation."))+" ")]),n.canRename?N("NcTextField",{ref:"textfield",staticClass:"invalid-filename-dialog__input",attrs:{error:!n.isValidName,"helper-text":n.validationError,label:n.t("New filename"),value:n.newName},on:{"update:value":function(y){n.newName=y}}}):n._e()],1)},B=[],M=(0,i.n)(P,R,B,!1,null,"9d7d9a49");const x=M.exports}),75217:((f,d,t)=>{t.d(d,{N:()=>D});var l=t(8990),o=t(94589),c=t(39841),s=t(418),u=t(57833),m=t(51431);(0,s.r)(s.c,s.b);const p=new Set(Object.keys(o.N.props)),g={name:"NcTextField",components:{NcIconSvgWrapper:u.N,NcInputField:o.N},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{" ":{},...o.N.props,trailingButtonLabel:{type:String,default:""},trailingButtonIcon:{type:String,default:"close",validator:r=>["close","arrowEnd","arrowRight","undo"].includes(r)}},emits:["update:value","update:modelValue","update:model-value"],setup(){return{model:(0,c.u)("value","update:value"),mdiArrowRight:l.d,mdiClose:l.c,mdiUndo:l.b}},computed:{isArrow(){return this.trailingButtonIcon==="arrowEnd"||this.trailingButtonIcon==="arrowRight"},propsAndAttrsToForward(){const r={arrowEnd:(0,s.a)("Save changes"),arrowRight:(0,s.a)("Save changes"),close:(0,s.a)("Clear text"),undo:(0,s.a)("Undo changes")};return{...this.$attrs,...Object.fromEntries(Object.entries(this.$props).filter(([e])=>p.has(e))),trailingButtonLabel:this.trailingButtonLabel||r[this.trailingButtonIcon]}}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()}}};var E=function(){var e=this,h=e._self._c;return h("NcInputField",e._g(e._b({ref:"inputField",scopedSlots:e._u([e.$scopedSlots.icon||e.$slots.default||e.$scopedSlots.default?{key:"icon",fn:function(){return[e._t("icon",function(){return[e._t("default")]})]},proxy:!0}:null,e.type!=="search"?{key:"trailing-button-icon",fn:function(){return[e.isArrow?h("NcIconSvgWrapper",{attrs:{directional:"",path:e.mdiArrowRight}}):h("NcIconSvgWrapper",{attrs:{path:e.trailingButtonIcon==="undo"?e.mdiUndo:e.mdiClose}})]},proxy:!0}:null],null,!0)},"NcInputField",e.propsAndAttrsToForward,!1),e.$listeners))},_=[],A=(0,m.n)(g,E,_,!1,null,null);const D=A.exports})}]);})();

//# sourceMappingURL=talk-node_modules_nextcloud_upload_dist_chunks_InvalidFilenameDialog-B_BCSatD_mjs-node_modules_nex-b03463.js.map?v=d4b19884f5c259515855