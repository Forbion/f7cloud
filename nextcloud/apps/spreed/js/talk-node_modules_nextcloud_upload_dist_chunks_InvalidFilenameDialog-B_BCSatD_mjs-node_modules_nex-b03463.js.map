{"version":3,"file":"talk-node_modules_nextcloud_upload_dist_chunks_InvalidFilenameDialog-B_BCSatD_mjs-node_modules_nex-b03463.js?v=d4b19884f5c259515855","mappings":"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","sources":["webpack:///talk/node_modules/@nextcloud/upload/dist/assets/InvalidFilenameDialog-DKMLP0ER.css","webpack://talk/./node_modules/@nextcloud/upload/dist/assets/InvalidFilenameDialog-DKMLP0ER.css?cffe","webpack:///talk/node_modules/@nextcloud/upload/dist/chunks/InvalidFilenameDialog-B_BCSatD.mjs","webpack:///talk/node_modules/@nextcloud/vue/dist/chunks/NcTextField-D_IMz2MR.mjs"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n.invalid-filename-dialog__input[data-v-9d7d9a49] {\n\t/* Ensure the helper text can always be shown without jumping */\n\tmin-height: calc(var(--default-clickable-area) + 4 * var(--default-font-size));\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@nextcloud/upload/dist/assets/InvalidFilenameDialog-DKMLP0ER.css\"],\"names\":[],\"mappings\":\";AACA;CACC,+DAA+D;CAC/D,8EAA8E;AAC/E\",\"sourcesContent\":[\"\\n.invalid-filename-dialog__input[data-v-9d7d9a49] {\\n\\t/* Ensure the helper text can always be shown without jumping */\\n\\tmin-height: calc(var(--default-clickable-area) + 4 * var(--default-font-size));\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../css-loader/dist/cjs.js!./InvalidFilenameDialog-DKMLP0ER.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../css-loader/dist/cjs.js!./InvalidFilenameDialog-DKMLP0ER.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import '../assets/InvalidFilenameDialog-DKMLP0ER.css';\nimport { InvalidFilenameError, InvalidFilenameErrorReason } from \"@nextcloud/files\";\nimport { defineComponent } from \"vue\";\nimport { t, n as normalizeComponent } from \"./index-DEeHBxbo.mjs\";\nimport NcDialog from \"@nextcloud/vue/dist/Components/NcDialog.js\";\nimport NcTextField from \"@nextcloud/vue/dist/Components/NcTextField.js\";\nimport NcNoteCard from \"@nextcloud/vue/dist/Components/NcNoteCard.js\";\nconst _sfc_main = defineComponent({\n  components: {\n    NcDialog,\n    NcNoteCard,\n    NcTextField\n  },\n  props: {\n    error: {\n      type: InvalidFilenameError,\n      required: true\n    },\n    /**\n     * @deprecated just for legacy reasons, replace with function from @nextcloud/files in future\n     */\n    validateFilename: {\n      type: Function,\n      required: true\n    }\n  },\n  setup() {\n    return {\n      t\n    };\n  },\n  data() {\n    return {\n      newName: \"\",\n      validationError: \"\"\n    };\n  },\n  computed: {\n    isValidName() {\n      return this.validationError === \"\";\n    },\n    isInvalidFileType() {\n      return this.error.reason === InvalidFilenameErrorReason.Extension && this.error.segment.match(/^\\.\\w/) !== null;\n    },\n    canRename() {\n      return !this.isInvalidFileType;\n    },\n    dialogButtons() {\n      const buttons = [\n        {\n          label: t(\"Cancel\"),\n          type: \"error\",\n          callback: () => {\n            this.$emit(\"close\", { cancel: true });\n          }\n        },\n        {\n          label: t(\"Skip\"),\n          callback: () => {\n            this.$emit(\"close\", { skip: true });\n          }\n        }\n      ];\n      if (this.canRename) {\n        buttons.push({\n          label: t(\"Rename\"),\n          type: \"primary\",\n          disabled: !this.isValidName,\n          callback: () => {\n            this.$emit(\"close\", { rename: this.newName.trimEnd() });\n          }\n        });\n      }\n      return buttons;\n    }\n  },\n  watch: {\n    error: {\n      handler() {\n        this.validationError = this.getErrorText(this.error);\n        this.newName = this.error.filename;\n      },\n      immediate: true\n    },\n    newName() {\n      try {\n        this.validateFilename(this.newName.trimEnd());\n        this.validationError = \"\";\n      } catch (error) {\n        this.validationError = this.getErrorText(error);\n      } finally {\n        const textfield = this.$refs.textfield?.$el.querySelector(\"input\");\n        if (textfield) {\n          textfield.setCustomValidity(this.validationError);\n          textfield.reportValidity();\n        }\n      }\n    }\n  },\n  methods: {\n    getErrorText(error) {\n      switch (error.reason) {\n        case InvalidFilenameErrorReason.Character:\n          return t('\"{segment}\" is not allowed inside a file or folder name.', { segment: error.segment });\n        case InvalidFilenameErrorReason.ReservedName:\n          return t('\"{segment}\" is a forbidden file or folder name.', { segment: error.segment });\n        case InvalidFilenameErrorReason.Extension:\n          return error.segment.match(/\\.\\w/) ? t('\"{segment}\" is a forbidden file type.', { segment: error.segment }) : t('Filenames must not end with \"{segment}\".', { segment: error.segment });\n      }\n    }\n  }\n});\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  _vm._self._setupProxy;\n  return _c(\"NcDialog\", { attrs: { \"buttons\": _vm.dialogButtons, \"name\": _vm.t(\"Invalid filename\") }, on: { \"close\": function($event) {\n    return _vm.$emit(\"close\", { cancel: true });\n  } } }, [_c(\"NcNoteCard\", { attrs: { \"severity\": \"error\" } }, [_vm._v(\" \" + _vm._s(_vm.getErrorText(_vm.error)) + \" \" + _vm._s(_vm.t(\"You can either rename the file, skip this file or cancel the whole operation.\")) + \" \")]), _vm.canRename ? _c(\"NcTextField\", { ref: \"textfield\", staticClass: \"invalid-filename-dialog__input\", attrs: { \"error\": !_vm.isValidName, \"helper-text\": _vm.validationError, \"label\": _vm.t(\"New filename\"), \"value\": _vm.newName }, on: { \"update:value\": function($event) {\n    _vm.newName = $event;\n  } } }) : _vm._e()], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"9d7d9a49\"\n);\nconst InvalidFilenameDialog = __component__.exports;\nexport {\n  InvalidFilenameDialog as default\n};\n","import { b as mdiUndo, c as mdiClose, d as mdiArrowRight } from \"./mdi-DXu6GWVJ.mjs\";\nimport { N as NcInputField } from \"./NcInputField-kKgY_2GV.mjs\";\nimport { u as useModelMigration } from \"./useModelMigration-EhAWvqDD.mjs\";\nimport { r as register, b as t50, c as t17, a as t } from \"./_l10n-BEfeU7gr.mjs\";\nimport { N as NcIconSvgWrapper } from \"./NcIconSvgWrapper-BreCg8pX.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nregister(t17, t50);\nconst NcInputFieldProps = new Set(Object.keys(NcInputField.props));\nconst _sfc_main = {\n  name: \"NcTextField\",\n  components: {\n    NcIconSvgWrapper,\n    NcInputField\n  },\n  // Allow forwarding all attributes\n  inheritAttrs: false,\n  model: {\n    prop: \"modelValue\",\n    event: \"update:modelValue\"\n  },\n  props: {\n    /**\n     * Any [NcInputField](#/Components/NcFields?id=ncinputfield) props\n     */\n    // Not an actual prop but needed to show in vue-styleguidist docs\n    // eslint-disable-next-line\n    \" \": {},\n    // Reuse all the props from NcInputField for better typing and documentation\n    ...NcInputField.props,\n    /**\n     * The `aria-label` to set on the trailing button\n     * If no explicit value is set it will default to the one matching the `trailingButtonIcon`:\n     *\n     * @default 'Clear text'|'Save changes'|'Undo changes'\n     */\n    trailingButtonLabel: {\n      type: String,\n      default: \"\"\n    },\n    // Custom props\n    /**\n     * Specifies which material design icon should be used for the trailing\n     * button.\n     *\n     * The `'arrowRight'` value is deprecated and will be removed in the next major version.\n     * Use `'arrowEnd'` instead.\n     *\n     * @type {'close'|'arrowEnd'|'arrowRight'|'undo'}\n     */\n    trailingButtonIcon: {\n      type: String,\n      default: \"close\",\n      validator: (value) => [\n        \"close\",\n        \"arrowEnd\",\n        \"arrowRight\",\n        \"undo\"\n      ].includes(value)\n    }\n  },\n  emits: [\n    /**\n     * Removed in v9 - use `update:modelValue` (`v-model`) instead\n     *\n     * @deprecated\n     */\n    \"update:value\",\n    \"update:modelValue\",\n    /** Same as update:modelValue for Vue 2 compatibility */\n    \"update:model-value\"\n  ],\n  setup() {\n    const model = useModelMigration(\"value\", \"update:value\");\n    return {\n      model,\n      mdiArrowRight,\n      mdiClose,\n      mdiUndo\n    };\n  },\n  computed: {\n    /**\n     * Is the trailing button icon directional.\n     * Meaning the icon needs to be flipped on RTL text flow.\n     */\n    isArrow() {\n      return this.trailingButtonIcon === \"arrowEnd\" || this.trailingButtonIcon === \"arrowRight\";\n    },\n    propsAndAttrsToForward() {\n      const predefinedLabels = {\n        arrowEnd: t(\"Save changes\"),\n        arrowRight: t(\"Save changes\"),\n        close: t(\"Clear text\"),\n        undo: t(\"Undo changes\")\n      };\n      return {\n        // Proxy all the HTML attributes\n        ...this.$attrs,\n        // Proxy original NcInputField's props\n        ...Object.fromEntries(Object.entries(this.$props).filter(([key]) => NcInputFieldProps.has(key))),\n        // Adjust aria-label for predefined trailing buttons\n        trailingButtonLabel: this.trailingButtonLabel || predefinedLabels[this.trailingButtonIcon]\n      };\n    }\n  },\n  methods: {\n    /**\n     * Focus the input element\n     *\n     * @public\n     */\n    focus() {\n      this.$refs.inputField.focus();\n    },\n    /**\n     * Select all the text in the input\n     *\n     * @public\n     */\n    select() {\n      this.$refs.inputField.select();\n    }\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"NcInputField\", _vm._g(_vm._b({ ref: \"inputField\", scopedSlots: _vm._u([!!_vm.$scopedSlots.icon || !!_vm.$slots.default || !!_vm.$scopedSlots.default ? { key: \"icon\", fn: function() {\n    return [_vm._t(\"icon\", function() {\n      return [_vm._t(\"default\")];\n    })];\n  }, proxy: true } : null, _vm.type !== \"search\" ? { key: \"trailing-button-icon\", fn: function() {\n    return [_vm.isArrow ? _c(\"NcIconSvgWrapper\", { attrs: { \"directional\": \"\", \"path\": _vm.mdiArrowRight } }) : _c(\"NcIconSvgWrapper\", { attrs: { \"path\": _vm.trailingButtonIcon === \"undo\" ? _vm.mdiUndo : _vm.mdiClose } })];\n  }, proxy: true } : null], null, true) }, \"NcInputField\", _vm.propsAndAttrsToForward, false), _vm.$listeners));\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst NcTextField = __component__.exports;\nexport {\n  NcTextField as N\n};\n//# sourceMappingURL=NcTextField-D_IMz2MR.mjs.map\n"],"names":["___CSS_LOADER_EXPORT___","module","options","update","_sfc_main","buttons","error","textfield","_sfc_render","_vm","_c","$event","_sfc_staticRenderFns","__component__","InvalidFilenameDialog","NcInputFieldProps","value","predefinedLabels","key","NcTextField"],"sourceRoot":""}