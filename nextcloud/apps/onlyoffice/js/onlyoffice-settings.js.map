{"version":3,"file":"onlyoffice-settings.js?v=0d756d65e433db47cf90","mappings":"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","sources":["webpack:///onlyoffice/src/settings.js"],"sourcesContent":["/**\n *\n * (c) Copyright Ascensio System SIA 2025\n *\n * This program is a free software product.\n * You can redistribute it and/or modify it under the terms of the GNU Affero General Public License\n * (AGPL) version 3 as published by the Free Software Foundation.\n * In accordance with Section 7(a) of the GNU AGPL its Section 15 shall be amended to the effect\n * that Ascensio System SIA expressly excludes the warranty of non-infringement of any third-party rights.\n *\n * This program is distributed WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * For details, see the GNU AGPL at: http://www.gnu.org/licenses/agpl-3.0.html\n *\n * You can contact Ascensio System SIA at 20A-12 Ernesta Birznieka-Upisha street, Riga, Latvia, EU, LV-1050.\n *\n * The interactive user interfaces in modified source and object code versions of the Program\n * must display Appropriate Legal Notices, as required under Section 5 of the GNU AGPL version 3.\n *\n * Pursuant to Section 7(b) of the License you must retain the original Product logo when distributing the program.\n * Pursuant to Section 7(e) we decline to grant you any rights under trademark law for use of our trademarks.\n *\n * All the Product's GUI elements, including illustrations and icon sets, as well as technical\n * writing content are licensed under the terms of the Creative Commons Attribution-ShareAlike 4.0 International.\n * See the License terms at http://creativecommons.org/licenses/by-sa/4.0/legalcode\n *\n */\n\n/* global _, jQuery */\n\n/**\n * @param {object} $ JQueryStatic object\n * @param {object} OC Nextcloud OCA object\n */\n(function($, OC) {\n\n\t$(document).ready(function() {\n\t\tOCA.Onlyoffice = _.extend({}, OCA.Onlyoffice)\n\t\tif (!OCA.Onlyoffice.AppName) {\n\t\t\tOCA.Onlyoffice = {\n\t\t\t\tAppName: 'onlyoffice',\n\t\t\t}\n\t\t}\n\n\t\tconst advToogle = function() {\n\t\t\t$('#onlyofficeSecretPanel').toggleClass('onlyoffice-hide')\n\t\t\t$('#onlyofficeAdv .icon').toggleClass('icon-triangle-s icon-triangle-n')\n\t\t}\n\n\t\tif ($('#onlyofficeInternalUrl').val().length\n\t\t\t|| $('#onlyofficeStorageUrl').val().length\n\t\t\t|| $('#onlyofficeJwtHeader').val().length) {\n\t\t\tadvToogle()\n\t\t}\n\n\t\t$('#onlyofficeAdv').click(advToogle)\n\n\t\t$('#onlyofficeGroups').prop('checked', $('#onlyofficeLimitGroups').val() !== '')\n\n\t\tconst groupListToggle = function() {\n\t\t\tif ($('#onlyofficeGroups').prop('checked')) {\n\t\t\t\tOC.Settings.setupGroupsSelect($('#onlyofficeLimitGroups'))\n\t\t\t} else {\n\t\t\t\t$('#onlyofficeLimitGroups').select2('destroy')\n\t\t\t}\n\t\t}\n\n\t\t$('#onlyofficeGroups').click(groupListToggle)\n\t\tgroupListToggle()\n\n\t\tconst demoToggle = function() {\n\t\t\t$('#onlyofficeAddrSettings input:not(#onlyofficeStorageUrl)').prop('disabled', $('#onlyofficeDemo').prop('checked'))\n\t\t}\n\n\t\t$('#onlyofficeDemo').click(demoToggle)\n\t\tdemoToggle()\n\n\t\tconst watermarkToggle = function() {\n\t\t\t$('#onlyofficeWatermarkSettings').toggleClass('onlyoffice-hide', !$('#onlyofficeWatermark_enabled').prop('checked'))\n\t\t}\n\n\t\t$('#onlyofficeWatermark_enabled').click(watermarkToggle)\n\n\t\t$('#onlyofficeWatermark_shareAll').click(function() {\n\t\t\t$('#onlyofficeWatermark_shareRead').parent().toggleClass('onlyoffice-hide')\n\t\t})\n\n\t\t$('#onlyofficeWatermark_linkAll').click(function() {\n\t\t\t$('#onlyofficeWatermark_link_sensitive').toggleClass('onlyoffice-hide')\n\t\t})\n\n\t\tconst watermarkGroupLists = [\n\t\t\t'allGroups',\n\t\t]\n\n\t\tconst watermarkTagLists = [\n\t\t\t'allTags',\n\t\t\t'linkTags',\n\t\t]\n\n\t\tconst watermarkNodeBehaviour = function(watermark) {\n\t\t\tconst watermarkListToggle = function() {\n\t\t\t\tif ($('#onlyofficeWatermark_' + watermark).prop('checked')) {\n\t\t\t\t\tif (watermark.indexOf('Group') >= 0) {\n\t\t\t\t\t\tOC.Settings.setupGroupsSelect($('#onlyofficeWatermark_' + watermark + 'List'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('#onlyofficeWatermark_' + watermark + 'List').select2({\n\t\t\t\t\t\t\tallowClear: true,\n\t\t\t\t\t\t\tcloseOnSelect: false,\n\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\tseparator: '|',\n\t\t\t\t\t\t\ttoggleSelect: true,\n\t\t\t\t\t\t\tplaceholder: t(OCA.Onlyoffice.AppName, 'Select tag'),\n\t\t\t\t\t\t\tquery: _.debounce(function(query) {\n\t\t\t\t\t\t\t\tquery.callback({\n\t\t\t\t\t\t\t\t\tresults: OC.SystemTags.collection.filterByName(query.term),\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 100, true),\n\t\t\t\t\t\t\tinitSelection(element, callback) {\n\t\t\t\t\t\t\t\tconst selection = ($(element).val() || []).split('|').map(function(tagId) {\n\t\t\t\t\t\t\t\t\treturn OC.SystemTags.collection.get(tagId)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tcallback(selection)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tformatResult(tag) {\n\t\t\t\t\t\t\t\treturn OC.SystemTags.getDescriptiveTag(tag)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tformatSelection(tag) {\n\t\t\t\t\t\t\t\treturn tag.get('name')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsortResults(results) {\n\t\t\t\t\t\t\t\tresults.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn OC.Util.naturalSortCompare(a.get('name'), b.get('name'))\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\treturn results\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$('#onlyofficeWatermark_' + watermark + 'List').select2('destroy')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$('#onlyofficeWatermark_' + watermark).click(watermarkListToggle)\n\t\t\twatermarkListToggle()\n\t\t}\n\n\t\t$.each(watermarkGroupLists, function(i, watermarkGroup) {\n\t\t\twatermarkNodeBehaviour(watermarkGroup)\n\t\t})\n\n\t\tif (OC.SystemTags && OC.SystemTags.collection) {\n\t\t\tOC.SystemTags.collection.fetch({\n\t\t\t\tsuccess() {\n\t\t\t\t\t$.each(watermarkTagLists, function(i, watermarkTag) {\n\t\t\t\t\t\twatermarkNodeBehaviour(watermarkTag)\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\n\t\tconst connectionError = document.getElementById('onlyofficeSettingsState').value\n\t\tif (connectionError !== '') {\n\t\t\tOCP.Toast.error(t(OCA.Onlyoffice.AppName, 'Error when trying to connect') + ' (' + connectionError + ')')\n\t\t}\n\n\t\t$('#onlyofficeAddrSave').click(function() {\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\t\t\tconst onlyofficeUrl = $('#onlyofficeUrl').val().trim()\n\n\t\t\tif (!onlyofficeUrl.length) {\n\t\t\t\t$('#onlyofficeInternalUrl, #onlyofficeStorageUrl, #onlyofficeSecret, #onlyofficeJwtHeader').val('')\n\t\t\t}\n\n\t\t\tconst onlyofficeInternalUrl = ($('#onlyofficeInternalUrl').val() || '').trim()\n\t\t\tconst onlyofficeStorageUrl = ($('#onlyofficeStorageUrl').val() || '').trim()\n\t\t\tconst onlyofficeVerifyPeerOff = $('#onlyofficeVerifyPeerOff').prop('checked')\n\t\t\tconst onlyofficeSecret = ($('#onlyofficeSecret').val() || '').trim()\n\t\t\tconst jwtHeader = ($('#onlyofficeJwtHeader').val() || '').trim()\n\t\t\tconst demo = $('#onlyofficeDemo').prop('checked')\n\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/settings/address'),\n\t\t\t\tdata: {\n\t\t\t\t\tdocumentserver: onlyofficeUrl,\n\t\t\t\t\tdocumentserverInternal: onlyofficeInternalUrl,\n\t\t\t\t\tstorageUrl: onlyofficeStorageUrl,\n\t\t\t\t\tverifyPeerOff: onlyofficeVerifyPeerOff,\n\t\t\t\t\tsecret: onlyofficeSecret,\n\t\t\t\t\tjwtHeader,\n\t\t\t\t\tdemo,\n\t\t\t\t},\n\t\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\t\t\t\t\tif (response && (response.documentserver != null || demo)) {\n\t\t\t\t\t\t$('#onlyofficeUrl').val(response.documentserver)\n\t\t\t\t\t\t$('#onlyofficeInternalUrl').val(response.documentserverInternal)\n\t\t\t\t\t\t$('#onlyofficeStorageUrl').val(response.storageUrl)\n\t\t\t\t\t\t$('#onlyofficeSecret').val(response.secret)\n\t\t\t\t\t\t$('#onlyofficeJwtHeader').val(response.jwtHeader)\n\n\t\t\t\t\t\t$('.section-onlyoffice-common, .section-onlyoffice-templates, .section-onlyoffice-watermark').toggleClass('onlyoffice-hide', (response.documentserver == null && !demo) || !!response.error.length)\n\n\t\t\t\t\t\tconst versionMessage = response.version ? (' (' + t(OCA.Onlyoffice.AppName, 'version') + ' ' + response.version + ')') : ''\n\n\t\t\t\t\t\tif (response.error) {\n\t\t\t\t\t\t\tOCP.Toast.error(t(OCA.Onlyoffice.AppName, 'Error when trying to connect') + ' (' + response.error + ')' + versionMessage)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tOCP.Toast.success(t(OCA.Onlyoffice.AppName, 'Settings have been successfully updated') + versionMessage)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.section-onlyoffice-common, .section-onlyoffice-templates, .section-onlyoffice-watermark').addClass('onlyoffice-hide')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\n\t\t$('#onlyofficeSave').click(function() {\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\n\t\t\tconst defFormats = {}\n\t\t\t$('input[id^=\"onlyofficeDefFormat\"]').each(function() {\n\t\t\t\tdefFormats[this.name] = this.checked\n\t\t\t})\n\n\t\t\tconst editFormats = {}\n\t\t\t$('input[id^=\"onlyofficeEditFormat\"]').each(function() {\n\t\t\t\teditFormats[this.name] = this.checked\n\t\t\t})\n\n\t\t\tconst sameTab = $('#onlyofficeSameTab').is(':checked')\n\t\t\tconst enableSharing = $('#onlyofficeEnableSharing').is(':checked')\n\t\t\tconst preview = $('#onlyofficePreview').is(':checked')\n\t\t\tconst advanced = $('#onlyofficeAdvanced').is(':checked')\n\t\t\tconst cronChecker = $('#onlyofficeCronChecker').is(':checked')\n\t\t\tconst emailNotifications = $('#onlyofficeEmailNotifications').is(':checked')\n\t\t\tconst versionHistory = $('#onlyofficeVersionHistory').is(':checked')\n\n\t\t\tconst limitGroupsString = $('#onlyofficeGroups').prop('checked') ? $('#onlyofficeLimitGroups').val() : ''\n\t\t\tconst limitGroups = limitGroupsString ? limitGroupsString.split('|') : []\n\n\t\t\tconst chat = $('#onlyofficeChat').is(':checked')\n\t\t\tconst compactHeader = $('#onlyofficeCompactHeader').is(':checked')\n\t\t\tconst feedback = $('#onlyofficeFeedback').is(':checked')\n\t\t\tconst forcesave = $('#onlyofficeForcesave').is(':checked')\n\t\t\tconst liveViewOnShare = $('#onlyofficeLiveViewOnShare').is(':checked')\n\t\t\tconst help = $('#onlyofficeHelp').is(':checked')\n\t\t\tconst reviewDisplay = $(\"input[type='radio'][name='reviewDisplay']:checked\").attr('id').replace('onlyofficeReviewDisplay_', '')\n\t\t\tconst theme = $(\"input[type='radio'][name='theme']:checked\").attr('id').replace('onlyofficeTheme_', '')\n\t\t\tconst unknownAuthor = $('#onlyofficeUnknownAuthor').val().trim()\n\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/settings/common'),\n\t\t\t\tdata: {\n\t\t\t\t\tdefFormats,\n\t\t\t\t\teditFormats,\n\t\t\t\t\tsameTab,\n\t\t\t\t\tenableSharing,\n\t\t\t\t\tpreview,\n\t\t\t\t\tadvanced,\n\t\t\t\t\tcronChecker,\n\t\t\t\t\temailNotifications,\n\t\t\t\t\tversionHistory,\n\t\t\t\t\tlimitGroups,\n\t\t\t\t\tchat,\n\t\t\t\t\tcompactHeader,\n\t\t\t\t\tfeedback,\n\t\t\t\t\tforcesave,\n\t\t\t\t\tliveViewOnShare,\n\t\t\t\t\thelp,\n\t\t\t\t\treviewDisplay,\n\t\t\t\t\ttheme,\n\t\t\t\t\tunknownAuthor,\n\t\t\t\t},\n\t\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tOCP.Toast.success(t(OCA.Onlyoffice.AppName, 'Settings have been successfully updated'))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\n\t\t$('#onlyofficeSecuritySave').click(function() {\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\n\t\t\tconst plugins = $('#onlyofficePlugins').is(':checked')\n\t\t\tconst macros = $('#onlyofficeMacros').is(':checked')\n\t\t\tconst protection = $(\"input[type='radio'][name='protection']:checked\").attr('id').replace('onlyofficeProtection_', '')\n\n\t\t\tconst watermarkSettings = {\n\t\t\t\tenabled: $('#onlyofficeWatermark_enabled').is(':checked'),\n\t\t\t}\n\t\t\tif (watermarkSettings.enabled) {\n\t\t\t\twatermarkSettings.text = ($('#onlyofficeWatermark_text').val() || '').trim()\n\n\t\t\t\tconst watermarkLabels = [\n\t\t\t\t\t'allGroups',\n\t\t\t\t\t'allTags',\n\t\t\t\t\t'linkAll',\n\t\t\t\t\t'linkRead',\n\t\t\t\t\t'linkSecure',\n\t\t\t\t\t'linkTags',\n\t\t\t\t\t'shareAll',\n\t\t\t\t\t'shareRead',\n\t\t\t\t]\n\t\t\t\t$.each(watermarkLabels, function(i, watermarkLabel) {\n\t\t\t\t\twatermarkSettings[watermarkLabel] = $('#onlyofficeWatermark_' + watermarkLabel).is(':checked')\n\t\t\t\t})\n\n\t\t\t\t$.each(watermarkGroupLists.concat(watermarkTagLists), function(i, watermarkList) {\n\t\t\t\t\tconst list = $('#onlyofficeWatermark_' + watermarkList).is(':checked') ? $('#onlyofficeWatermark_' + watermarkList + 'List').val() : ''\n\t\t\t\t\twatermarkSettings[watermarkList + 'List'] = list ? list.split('|') : []\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/settings/security'),\n\t\t\t\tdata: {\n\t\t\t\t\twatermarks: watermarkSettings,\n\t\t\t\t\tplugins,\n\t\t\t\t\tmacros,\n\t\t\t\t\tprotection,\n\t\t\t\t},\n\t\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tOCP.Toast.success(t(OCA.Onlyoffice.AppName, 'Settings have been successfully updated'))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\n\t\t$('.section-onlyoffice-addr input').keypress(function(e) {\n\t\t\tconst code = e.keyCode || e.which\n\t\t\tif (code === 13) {\n\t\t\t\t$('#onlyofficeAddrSave').click()\n\t\t\t}\n\t\t})\n\n\t\t$('#onlyofficeSecret-show').click(function() {\n\t\t\tif ($('#onlyofficeSecret').attr('type') === 'password') {\n\t\t\t\t$('#onlyofficeSecret').attr('type', 'text')\n\t\t\t} else {\n\t\t\t\t$('#onlyofficeSecret').attr('type', 'password')\n\t\t\t}\n\t\t})\n\n\t\t$('#onlyofficeClearVersionHistory').click(function() {\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/settings/history'),\n\t\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tOCP.Toast.success(t(OCA.Onlyoffice.AppName, 'All history successfully deleted'))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\n\t\t$('#onlyofficeAddTemplate').change(function() {\n\t\t\tconst file = this.files[0]\n\t\t\tconst data = new FormData()\n\n\t\t\tdata.append('file', file)\n\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\t\t\tOCA.Onlyoffice.AddTemplate(file, (template, error) => {\n\n\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\t\t\t\tconst message = error\n\t\t\t\t\t? t(OCA.Onlyoffice.AppName, 'Error') + ': ' + error\n\t\t\t\t\t: t(OCA.Onlyoffice.AppName, 'Template successfully added')\n\n\t\t\t\tif (error) {\n\t\t\t\t\tOCP.Toast.error(message)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (template) {\n\t\t\t\t\tOCA.Onlyoffice.AttachItemTemplate(template)\n\t\t\t\t}\n\t\t\t\tOCP.Toast.success(message)\n\t\t\t})\n\t\t})\n\n\t\t$(document).on('click', '.onlyoffice-template-delete', function(event) {\n\t\t\tconst item = $(event.target).parents('.onlyoffice-template-item')\n\t\t\tconst templateId = $(item).attr('data-id')\n\n\t\t\t$('.section-onlyoffice').addClass('icon-loading')\n\t\t\tOCA.Onlyoffice.DeleteTemplate(templateId, (response) => {\n\t\t\t\t$('.section-onlyoffice').removeClass('icon-loading')\n\n\t\t\t\tconst message = response.error\n\t\t\t\t\t? t(OCA.Onlyoffice.AppName, 'Error') + ': ' + response.error\n\t\t\t\t\t: t(OCA.Onlyoffice.AppName, 'Template successfully deleted')\n\t\t\t\tif (response.error) {\n\t\t\t\t\tOCP.Toast.error(message)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t$(item).detach()\n\t\t\t\tOCP.Toast.success(message)\n\t\t\t})\n\t\t})\n\n\t\t$(document).on('click', '.onlyoffice-template-item p', function(event) {\n\t\t\tconst item = $(event.target).parents('.onlyoffice-template-item')\n\t\t\tconst templateId = $(item).attr('data-id')\n\n\t\t\tconst url = OC.generateUrl('/apps/' + OCA.Onlyoffice.AppName + '/{fileId}?template={template}',\n\t\t\t\t{\n\t\t\t\t\tfileId: templateId,\n\t\t\t\t\ttemplate: 'true',\n\t\t\t\t})\n\n\t\t\twindow.open(url)\n\t\t})\n\n\t\t$(document).on('click', '.onlyoffice-template-download', function(event) {\n\t\t\tconst item = $(event.target).parents('.onlyoffice-template-item')\n\t\t\tconst templateId = $(item).attr('data-id')\n\n\t\t\tconst downloadLink = OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/downloadas?fileId={fileId}&template={template}', {\n\t\t\t\tfileId: templateId,\n\t\t\t\ttemplate: 'true',\n\t\t\t})\n\n\t\t\tlocation.href = downloadLink\n\t\t})\n\n\t\tconst sameTabCheckbox = document.getElementById('onlyofficeSameTab')\n\t\tconst sharingBlock = document.getElementById('onlyofficeEnableSharingBlock')\n\t\tconst sharingCheckbox = document.getElementById('onlyofficeEnableSharing')\n\n\t\tsameTabCheckbox.onclick = function() {\n\t\t\tconst isChecked = sameTabCheckbox.checked\n\t\t\tsharingBlock.style.display = isChecked ? 'none' : 'block'\n\t\t\tsharingCheckbox.checked = isChecked ? sharingCheckbox.checked : false\n\t\t}\n\t})\n\n})(jQuery, OC)\n"],"names":["$","OC","document","ready","OCA","Onlyoffice","_","extend","AppName","advToogle","toggleClass","val","length","click","prop","groupListToggle","Settings","setupGroupsSelect","select2","demoToggle","parent","watermarkGroupLists","watermarkTagLists","watermarkNodeBehaviour","watermark","watermarkListToggle","indexOf","allowClear","closeOnSelect","multiple","separator","toggleSelect","placeholder","t","query","debounce","callback","results","SystemTags","collection","filterByName","term","initSelection","element","split","map","tagId","get","formatResult","tag","getDescriptiveTag","formatSelection","sortResults","sort","a","b","Util","naturalSortCompare","each","i","watermarkGroup","fetch","success","watermarkTag","connectionError","getElementById","value","OCP","Toast","error","addClass","onlyofficeUrl","trim","onlyofficeInternalUrl","onlyofficeStorageUrl","onlyofficeVerifyPeerOff","onlyofficeSecret","jwtHeader","demo","ajax","method","url","generateUrl","data","documentserver","documentserverInternal","storageUrl","verifyPeerOff","secret","response","removeClass","versionMessage","version","defFormats","this","name","checked","editFormats","sameTab","is","enableSharing","preview","advanced","cronChecker","emailNotifications","versionHistory","limitGroupsString","limitGroups","chat","compactHeader","feedback","forcesave","liveViewOnShare","help","reviewDisplay","attr","replace","theme","unknownAuthor","plugins","macros","protection","watermarkSettings","enabled","text","watermarkLabels","watermarkLabel","concat","watermarkList","list","watermarks","keypress","e","keyCode","which","change","file","files","FormData","append","AddTemplate","template","message","AttachItemTemplate","on","event","item","target","parents","templateId","DeleteTemplate","detach","fileId","window","open","downloadLink","location","href","sameTabCheckbox","sharingBlock","sharingCheckbox","onclick","isChecked","style","display","jQuery"],"sourceRoot":""}