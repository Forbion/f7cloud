<!DOCTYPE html> <html class="rl-started-trigger"> <head data-user data-user-displayname data-requesttoken="tJHXNumSgBJY/u0fHY0OqAu7k8U6QzrHQiU2rzvnR4k=:3PuRQaGlzSUzu6tVTeVbzUHS8p8KG2PoBlx530i/Dd0="> <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta name="google" content="notranslate"> <meta name="robots" content="noindex,nofollow,noodp"> <meta name="theme-color" content="black"> <title></title> <style id="app-boot-css">:root{--fontSans:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontSerif:ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;--fontMono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}#rl-app.fontArial{--fontSans:"Nimbus Sans L","Liberation sans","Arial Unicode MS",Arial,Helvetica,Garuda,Utkal,FreeSans,sans-serif}#rl-app.fontTahoma{--fontSans:"Luxi Sans",Tahoma,Loma,Geneva,Meera,sans-serif}#rl-app.fontTrebuchet{--fontSans:"DejaVu Sans Condensed",Trebuchet,"Trebuchet MS",sans-serif}#rl-app.fontLucida{--fontSans:"Lucida Sans Unicode","Lucida Sans","DejaVu Sans","Bitstream Vera Sans","DejaVu LGC Sans",sans-serif}#rl-app.fontVerdana{--fontSans:"DejaVu Sans",Verdana,Geneva,"Bitstream Vera Sans","DejaVu LGC Sans",sans-serif}#rl-app.fontMonoCourier{--fontMono:"Liberation Mono","Courier New",FreeMono,Courier,monospace}#rl-app.fontMonoLucida{--fontMono:"DejaVu Sans Mono","DejaVu LGC Sans Mono","Bitstream Vera Sans Mono","Lucida Console",Monaco,monospace}#rl-app.fontSerifTimes{--fontSerif:"Nimbus Roman No9 L","Times New Roman",Times,FreeSerif,serif}#rl-app.fontSerifPalatino{--fontSerif:"Bitstream Charter","Palatino Linotype",Palatino,Palladio,"URW Palladio L","Book Antiqua",Times,serif}#rl-app.fontSerifGeorgia{--fontSerif:"URW Palladio L",Georgia,Times,serif}body,html{margin:0;padding:0;-webkit-text-size-adjust:100%}#rl-app *,#rl-app ::after,#rl-app ::before{box-sizing:border-box}#rl-app{background-color:var(--main-bg-color,#aaa);color:var(--main-color,#333);font-family:var(--fontSans);-webkit-touch-callout:none;font-size:var(--main-font-size,14px);line-height:1.25;position:relative}body#rl-app{height:100vh;height:100dvh;width:100vw}#rl-BadBrowser,#rl-NoCookie,#rl-loading,#rl-loading-error{color:var(--loading-color,#000);text-shadow:var(--loading-text-shadow);font-size:214%;line-height:130%;position:fixed;text-align:center;top:50%;transform:translateY(-50%);width:100%}#rl-loading .icon-spinner{height:1em;width:1em}
</style> <link type="text/css" rel="stylesheet" href="/apps/f7mail/snappymail/v/0.0.0/static/css/admin.min.css"> <link rel="manifest" href="/apps/f7mail/snappymail/v/0.0.0/static/manifest.json"> <link rel="icon" href="/core/img/favicon.ico" type="image/svg+xml"> <style id="app-theme-style" data-name="Default">:root{color-scheme:light;/* MAIN */
	--main-color:#333;--main-bg-color:#48525C;--main-bg-image:url("/apps/f7mail/snappymail/v/0.0.0/themes/Default/images/background.jpg");/* LOADING */
	--loading-color:#ddd;--loading-text-shadow:0px 1px 0px rgba(0,0,0,0.5);/* LOGIN */
	--login-color:#eee;--login-bg-color:rgba(0,0,0,0.5);--login-box-shadow:0px 2px 10px rgba(0,0,0,0.5);--login-border:none;--login-border-radius:7px;/* MENU */
	--dropdown-menu-color:#333;--dropdown-menu-bg-color:#fff;--dropdown-menu-hover-bg-color:#48525C;--dropdown-menu-hover-color:#eee;--dropdown-menu-disable-color:#999;/* FOLDERS */
	--folders-color:#fff;--folders-disabled-color:#aaa;--folders-selected-color:#fff;--folders-selected-bg-color:rgba(0,0,0,0.5);--folders-focused-color:#fff;--folders-focused-bg-color:rgba(0,0,0,0.7);--folders-hover-color:#fff;--folders-hover-bg-color:rgba(0,0,0,0.5);--folders-drop-color:#fff;--folders-drop-bg-color:rgba(0,0,0,0.5);/* SETTINGS */
	--settings-menu-color:#fff;--settings-menu-selected-color:#fff;--settings-menu-selected-bg-color:rgba(0,0,0,0.5);--settings-menu-hover-color:#fff;--settings-menu-hover-bg-color:rgba(0,0,0,0.5);/* MESSAGE LIST */
	--message-list-toolbar-bg-color:#eee;}.thm-message-list-top-toolbar,.thm-message-list-bottom-toolbar{background-image:linear-gradient(to bottom,#f4f4f4,#dfdfdf) !important;background-repeat:repeat-x !important;}</style> <link rel="stylesheet" href="/core/css/server.css"> <link rel="stylesheet" href="/themes/forbion/css/app.css"> <link rel="stylesheet" href="/themes/forbion/css/pages/app-mail-new/_app-mail-new.css"> <link rel="stylesheet" href="/apps/notifications/css/notifications-main.css?v=150a2902-11"> <script src="/themes/forbion/js/scripts.js"></script> <script defer src="/dist/core-common.js?v=72fe44a9-11"></script> <script defer src="/dist/core-main.js?v=72fe44a9-11"></script> <script defer src="/apps/updatenotification/l10n/ru.js?v=771fc02f-11"></script> <script defer src="/dist/updatenotification-init.js?v=771fc02f-11"></script> <script defer src="/dist/core-files_fileinfo.js?v=72fe44a9-11"></script> <script defer src="/dist/core-files_client.js?v=72fe44a9-11"></script> <script defer src="/js/core/merged-template-prepend.js?v=72fe44a9-11"></script> <script defer src="/dist/core-unsupported-browser-redirect.js?v=72fe44a9-11"></script> <script defer src="/core/l10n/ru.js?v=72fe44a9-11"></script> <script defer src="/dist/core-unified-search.js?v=72fe44a9-11"></script> <script defer src="/apps/notifications/l10n/ru.js?v=771fc02f-11"></script> <script defer src="/apps/notifications/js/notifications-main.mjs?v=771fc02f-11" type="module"></script> <script defer src="/apps/spreed/l10n/ru.js?v=72fe44a9-11"></script> <script defer src="/apps/spreed/js/talk-search.js?v=72fe44a9-11"></script> <!-- <script defer src="/apps/theming/l10n/ru.js?v=72fe44a9-11"></script>--> <!-- <script defer src="/apps/theming/js/theming.js?v=72fe44a9-11"></script>--> <script defer src="/apps/user_status/l10n/ru.js?v=72fe44a9-11"></script> <script defer src="/dist/user_status-menu.js?v=72fe44a9-11"></script> <script defer src="/apps/files_sharing/l10n/ru.js?v=72fe44a9-11"></script> <script defer src="/dist/files_sharing-main.js?v=72fe44a9-11"></script> <script nonce=""> var _oc_webroot=""; var _oc_config={"blacklist_files_regex":"\\.(part|filepart)$","forbidden_filename_characters":["\\","\/","<",">",":","\"","|","?","*","\\","\/"],"auto_logout":false,"loglevel":0,"lost_password_link":null,"modRewriteWorking":true,"no_unsupported_browser_warning":false,"session_keepalive":true,"session_lifetime":1440,"sharing.maxAutocompleteResults":25,"sharing.minSearchStringLength":0,"version":"30.0.6.2","versionstring":"30.0.6","enable_non-accessible_features":true}; var _oc_appswebroots={"notifications":"/apps/notifications"}; var oc_userconfig={"avatar":{"version":10,"generated":true}}; </script> </head> <body id="rl-app" data-admin='1' spellcheck="false"> <div id="initial-state-container" style="display: none;"> <input type="hidden" id="initial-state-notifications-throttled_push_notifications" value="ZmFsc2U="> </div> <header id="header" class="header-new"> <div class="l-wrapper"> <button class="is-header__burger" type="button"> <i></i> <i></i> <i></i> </button> <a href="/" class="logo__header"> <img src="/themes/forbion/images/logo-header.svg" alt="logo"> </a> <nav class="app-menu"> <ul class="app-menu__list"> <li class="app-menu-entry"> <a href="/apps/f7mail/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/mail.svg" alt="mail"> </span> <span class="app-menu-entry__label">Почта</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/files/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/files.svg" alt="files"> </span> <span class="app-menu-entry__label">Файлы</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/calendar/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/calendar.svg" alt="calendar"> </span> <span class="app-menu-entry__label">Календарь</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/contacts/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/contacts.svg" alt="contacts"> </span> <span class="app-menu-entry__label">Контакты</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/spreed/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/conferences.svg" alt="conferences"> </span> <span class="app-menu-entry__label">Конференции</span> </a> </li> <li class="app-menu-entry"> <span class="app-menu-entry__link-more"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/more.svg" alt="more"> </span> <span class="app-menu-entry__label">Еще</span> </span> </li> </ul> <ul class="app-menu__list hidden-app-menu__list"> <li class="app-menu-entry"> <a href="/apps/deck/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/cards.svg" alt="cards"> </span> <span class="app-menu-entry__label">Карточки</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/tasks/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/tasks.svg" alt="tasks"> </span> <span class="app-menu-entry__label">Задачи</span> </a> </li> <li class="app-menu-entry"> <a href="/apps/notes/" class="app-menu-entry__link"> <span class="app-menu-entry__icon"> <img src="/themes/forbion/images/menu/notes.svg" alt="notes"> </span> <span class="app-menu-entry__label">Заметки</span> </a> </li> <span class="setting-hidden-menu"> <img src="/themes/forbion/images/menu/settings.svg" alt="settings"> </span> </ul> </nav> <div class="user-control__header"> <div class="unified-search__wrapper"> <div id="unified-search"></div> </div> <a id="username-display" class="name__user" style="cursor: default;">  </a> <a href="#" id="user-menu-f7mail"></a> <div class="notifications__wrapper"> <div id="notifications"></div> </div> <div class="help-online__user"> <a target="_blank" href="https://lk.forbion.ru/accounts/login/"> <img src="/themes/forbion/images/help_online_user.png"> </a> </div> </div> <div id="header-menu-user-menu-f7mail" class="header-menu__wrapper" style="display: none;"> <div class="header-menu__content"> <ul class="account-menu__list"> <!--                <li class="list-item__wrapper" data-v-e2527068="">--> <!--                    <div class="list-item list-item&#45;&#45;compact">--> <!--                        <a id="profile" aria-label="" href="/apps/f7mail/#/settings/" target="_self" rel="noopener noreferrer" class="list-item__anchor">--> <!--                            <img src="/themes/forbion/images/gear-black.svg" alt="" class="account-menu-entry__icon">--> <!--                            <div class="list-item-content">--> <!--                                <div class="list-item-content__main">--> <!--                                    <div class="list-item-content__name">Настройки почты</div>--> <!--                                </div>--> <!--                                <div class="list-item-content__details"></div>--> <!--                            </div>--> <!--                        </a>--> <!--                        <div class="list-item-content__actions" style="display: none;"></div>--> <!--                    </div>--> <!--                </li>--> <li class="list-item__wrapper account-menu-entry" data-v-e2527068=""> <div class="list-item list-item--compact"> <a id="settings" aria-label="" href="/settings/user" target="_self" rel="noopener noreferrer" class="list-item__anchor"> <img src="/apps/settings/img/personal.svg?v=e721567c" alt="" class="account-menu-entry__icon"> <div class="list-item-content"> <div class="list-item-content__main"> <div class="list-item-content__name">Личные настройки</div> </div> <div class="list-item-content__details"></div> </div> </a> <div class="list-item-content__actions" style="display: none;"></div> </div> </li> <li class="list-item__wrapper account-menu-entry" data-v-e2527068=""> <div class="list-item list-item--compact"> <a id="core_users" aria-label="" href="/settings/users" target="_self" rel="noopener noreferrer" class="list-item__anchor"> <img src="/apps/settings/img/users.svg?v=e721567c" alt="" class="account-menu-entry__icon"> <!--                            <img src="/themes/forbion/images/users.svg" alt="" class="account-menu-entry__icon">--> <div class="list-item-content"> <div class="list-item-content__main"> <div class="list-item-content__name">Учётные записи</div> </div> <div class="list-item-content__details"></div> </div> </a> <div class="list-item-content__actions" style="display: none;"></div> </div> </li> <li class="list-item__wrapper account-menu-entry" data-v-e2527068=""> <div class="list-item list-item--compact"> <a id="logout" aria-label="" href="#" target="_self" rel="noopener noreferrer" class="list-item__anchor"> <img src="/core/img/actions/logout.svg?v=e721567c" alt="" class="account-menu-entry__icon"> <div class="list-item-content"> <div class="list-item-content__main"> <div class="list-item-content__name">Выйти</div> </div> <div class="list-item-content__details"></div> </div> </a> <div class="list-item-content__actions" style="display: none;"></div> </div> </li> </ul> </div> </div> </div> </header> <div id="rl-loading"> <div id="rl-loading-desc">F7 Forbion Mail</div> <i class="icon-spinner"></i> <noscript><div class="error-desc">Для работы приложения необходим JavaScript.<br />
По-видимому, JavaScript либо не поддерживается вашим браузером, либо отключен.<br />
Включите JavaScript, изменив настройки браузера, затем повторите попытку.<br />
</div></noscript> </div> <div id="rl-loading-error" hidden="">An error occurred.<br>Please refresh the page and try again.<br></div> <div id="rl-BadBrowser" hidden=""> <h1>Ваш браузер устарел.</h1> <div class="error-desc">Чтобы использовать все возможности приложения,<br />
загрузите и установите один из этих браузеров<br />
</div> </div> <div id="rl-NoCookie" hidden=""> <h1>Для работы приложения необходимы Cookie.</h1> <div class="error-desc">По-видимому, Cookie либо не поддерживаются вашим браузером, либо отключены.
Включите Cookie, изменив настройки браузера, затем повторите попытку.
</div> </div> <div id="rl-content" hidden=""> <div class="rl-wrapper"> <div id="rl-menu" class="active"> <ul class="menu"> <li> <div class="list letterMailCustom"> <div class="icon"> <img class="non-active" src="/themes/forbion/images/mailing.png" alt="Написать"> <img class="active" src="/themes/forbion/images/mailing-active.png" alt="Написать"> </div> <span class="name"> Написать </span> </div> </li> <li> <a href="/apps/f7mail/#/mailbox/" class="list"> <div class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="23" height="19" viewBox="0 0 23 19"                                      fill="none"> <path d="M1 3.43879V15.9214C1 16.3654 1.27203 16.764 1.68544 16.9258C1.81071 16.9748 1.94404 17 2.07857 17H10.625H15.7292H20.6375C20.7674 17 20.8966 16.9814 21.0213 16.9448C21.6015 16.7745 22 16.2422 22 15.6375V3.43879C22 2.64417 21.3558 2 20.5612 2H11.5H2.43879C1.64417 2 1 2.64417 1 3.43879Z"                                           stroke="black"></path> <path d="M21.6948 14.6135L13.0625 5.62665C12.2109 4.74011 10.7919 4.74284 9.94379 5.63264L1.55502 14.4335C1.19875 14.8072 1 15.3038 1 15.8202V16.174C1 16.4548 1.14273 16.7165 1.37891 16.8685C1.51224 16.9544 1.66746 17 1.82603 17H2.74942H6.18689L16.0284 17L20.8267 17C22.0196 17 22.2912 15.418 21.6948 14.6135Z"                                           stroke="black"></path> <path class="fill-green-active"                                           d="M1.48416 4.20457L11.0555 11.654C11.3166 11.8572 11.6826 11.8562 11.9425 11.6515L21.6914 3.97249C21.8863 3.819 22 3.58464 22 3.33659C22 3.14521 21.9322 2.96002 21.8086 2.81389L21.6779 2.65935C21.5078 2.4581 21.2829 2.31054 21.0305 2.23456L20.5559 2.09165C20.3541 2.03088 20.1444 2 19.9337 2H16.8159H11.8875H9.26393H6.64034H2.14277C1.04318 2 0.761915 3.17791 1.19247 3.90169C1.26474 4.02317 1.37261 4.11775 1.48416 4.20457Z"                                           fill="white" stroke="black"></path> </svg> </div> <span class="name"> Почта </span> </a> </li> <li> <a href="/apps/f7mail/#/settings/" class="list"> <div class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="23" height="19" viewBox="0 0 23 19"                                      fill="none"> <path d="M8.97977 17.3983C8.71058 17.3187 8.46764 17.1684 8.27621 16.9631C8.08478 16.7578 7.95186 16.5049 7.89128 16.2308C7.83114 15.9826 7.71326 15.7522 7.54722 15.5582C7.38118 15.3641 7.17168 15.2121 6.93576 15.1143C6.69985 15.0166 6.44419 14.9759 6.18959 14.9957C5.935 15.0154 5.68866 15.095 5.47063 15.2279C4.01899 16.1123 2.35662 14.4508 3.24096 12.9983C3.37371 12.7803 3.45315 12.5341 3.47285 12.2797C3.49254 12.0253 3.45192 11.7698 3.3543 11.534C3.25667 11.2983 3.10479 11.0889 2.911 10.9228C2.71721 10.7568 2.48698 10.6389 2.23902 10.5786C0.586994 10.1778 0.586994 7.8277 2.23902 7.42692C2.4872 7.36679 2.71767 7.2489 2.91168 7.08287C3.10569 6.91683 3.25776 6.70732 3.3555 6.47141C3.45324 6.23549 3.49389 5.97983 3.47415 5.72524C3.45441 5.47064 3.37484 5.2243 3.2419 5.00627C2.35756 3.55464 4.01899 1.89226 5.47157 2.7766C6.41236 3.3486 7.63162 2.84246 7.89128 1.77466C8.29205 0.122638 10.6421 0.122638 11.0429 1.77466C11.1031 2.02284 11.2209 2.25332 11.387 2.44733C11.553 2.64134 11.7625 2.7934 11.9984 2.89114C12.2343 2.98888 12.49 3.02954 12.7446 3.0098C12.9992 2.99006 13.2455 2.91048 13.4636 2.77754C14.9152 1.8932 16.5776 3.55464 15.6932 5.00721C15.5605 5.22515 15.481 5.47134 15.4613 5.72576C15.4417 5.98019 15.4823 6.23567 15.5799 6.47144C15.6775 6.70721 15.8294 6.91662 16.0232 7.08264C16.217 7.24867 16.4472 7.36662 16.6952 7.42692C17.9295 7.72609 18.2418 9.1147 17.6313 9.96423"                                           stroke="black" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M6.64453 9.00279C6.64453 9.75132 6.94189 10.4692 7.47118 10.9985C8.00048 11.5278 8.71836 11.8252 9.4669 11.8252C10.2154 11.8252 10.9333 11.5278 11.4626 10.9985C11.9919 10.4692 12.2893 9.75132 12.2893 9.00279C12.2893 8.25425 11.9919 7.53637 11.4626 7.00707C10.9333 6.47778 10.2154 6.18042 9.4669 6.18042C8.71836 6.18042 8.00048 6.47778 7.47118 7.00707C6.94189 7.53637 6.64453 8.25425 6.64453 9.00279Z"                                           stroke="black" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M19.7039 17.2988L21.5855 15.4172L19.7039 13.5356M16.8816 13.5356L15 15.4172L16.8816 17.2988"                                           stroke="black" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M1.0377 8.46108C1.11791 8.19207 1.26873 7.94946 1.47448 7.75849C1.68023 7.56751 1.93338 7.43515 2.20762 7.37517C2.45593 7.31559 2.68666 7.19821 2.88104 7.0326C3.07542 6.86699 3.22794 6.65782 3.3262 6.42212C3.42446 6.18643 3.46568 5.93086 3.4465 5.67622C3.42733 5.42158 3.34829 5.17506 3.21584 4.95674C2.3347 3.50316 3.9998 1.84445 5.45043 2.732C5.66807 2.86523 5.91408 2.94522 6.16846 2.96547C6.42284 2.98573 6.67841 2.94568 6.9144 2.84857C7.15038 2.75146 7.36013 2.60004 7.52658 2.40662C7.69303 2.2132 7.81149 1.98323 7.87234 1.7354C8.27676 0.0842664 10.6268 0.0894537 11.024 1.74236C11.0836 1.99067 11.2009 2.2214 11.3665 2.41578C11.5322 2.61016 11.7413 2.76268 11.977 2.86094C12.2127 2.9592 12.4683 3.00042 12.7229 2.98124C12.9776 2.96207 13.2241 2.88303 13.4424 2.75058C14.896 1.86945 16.5547 3.53454 15.6671 4.98517C15.0931 5.92469 15.5965 7.14507 16.6637 7.40708C18.3149 7.8115 18.3097 10.1616 16.6568 10.5587C16.4085 10.6183 16.1777 10.7357 15.9834 10.9013M11.95 15.0853C11.714 15.1824 11.5043 15.3338 11.3378 15.5273C11.1714 15.7207 11.0529 15.9507 10.9921 16.1985C10.6902 17.4321 9.30088 17.7414 8.4527 17.129"                                           stroke="black" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </div> <span class="name"> Настройки </span> </a> </li> </ul> <div class="settings-wrapper addNewAccountCustom"> <div class="settings-inner"> <div class="icon"> <svg xmlns="http://www.w3.org/2000/svg" width="23" height="19" viewBox="0 0 23 19"                                      fill="none"> <path d="M11.4922 0.642822L11.4921 17.6428" stroke="black"                                           stroke-linecap="round"></path> <path d="M2.49986 9.6208L20.4998 9.62079" stroke="black" stroke-linecap="round"></path> </svg> </div> <span class="name">                         Добавить <br> уч. запись                     </span> </div> </div> </div> <div class="rl-inner"> <div id="rl-left"></div> <div id="rl-right"></div> </div> </div> </div> <div id="rl-popups"></div> <template id="CheckboxComponent"><label class="e-component e-checkbox material-design" data-bind="css: { 'disabled': !enable() }"> <div> <input type="checkbox" value="1" data-bind="checked: value, enable: enable, attr: {name: name}"> <div role="checkbox"></div> </div> <!-- ko if: label --> <span data-bind="attr: {'data-i18n': label}"></span> <!-- /ko --> </label> </template><template id="SelectComponent"><div class="e-component"> <select data-bind="options: options, value: value, optionsText: optionsText, optionsValue: optionsValue, css: className, optionsAfterRender: defaultOptionsAfterRender"></select> <!-- ko if: label --> <span data-bind="attr: {'data-i18n': label}"></span> <!-- /ko --> <!-- ko if: trigger --> <span data-bind="saveTrigger: trigger"></span> <!-- /ko --> </div> </template><template id="AdminLogin"><div class="form-wrapper"> <div class="descWrapper" data-i18n="TOP_PANEL/LABEL_ADMIN_PANEL"></div> <div class="alert" data-bind="hidden: !submitError()"> <a href="#" class="close" data-bind="click: hideError">×</a> <span data-bind="text: submitError"></span> </div> <form action="#/" spellcheck="false" method="POST" data-bind="submit: submitForm, css: {'errorAnimated': formError, 'submitting': submitRequest()}"> <div class="controls textarea" data-bind="css: {'error': loginError}"> <span class="fontastic">👤</span> <input name="Login" required="" type="text" class="input-block-level"    autofocus="" autocomplete="username" autocorrect="off" autocapitalize="off"    data-bind="textInput: login, disable: submitRequest"    data-i18n="[placeholder]LOGIN/LABEL_LOGIN"> </div> <div class="controls password" data-bind="css: {'error': passwordError}"> <span class="fontastic">🔑</span> <input name="Password" required="" type="password" class="input-block-level"    autocomplete="current-password" autocorrect="off" autocapitalize="off"    data-bind="textInput: password, disable: submitRequest"    data-i18n="[placeholder]GLOBAL/PASSWORD"> </div> <div class="controls textarea"> <span class="fontastic">⏱</span> <input name="TOTP" type="text" pattern="[0-9]*" inputmode="numeric" class="input-block-level"    autocomplete="one-time-code" autocorrect="off" autocapitalize="off"    data-bind="textInput: totp, disable: submitRequest"    data-i18n="[placeholder]LOGIN/LABEL_TOTP"> </div> <div id="plugin-Login-BottomControlGroup"></div> <div class="controls"> <button class="btn btn-large buttonLogin" data-bind="command: submitCommand">Войти</button> </div> </form> </div></template><template id="AdminMenu"><nav data-bind="foreach: menu"> <a data-bind="css: {'selected': selected }, attr: { 'href': $root.link(route), 'data-i18n': label }"></a> </nav> </template><template id="AdminPane"><div class="b-toolbar g-ui-user-select-none"> <a class="btn btn-thin fontastic toggleLeft" data-bind="click: toggleLeftPanel"></a> <h4>SnappyMail - <span data-i18n="TOP_PANEL/LABEL_ADMIN_PANEL"></span></h4> <a class="btn btn-logout fontastic" data-bind="click: logoutClick">⏻</a> </div> </template><template id="AdminSettingsAbout"><div class="form-horizontal"> <div class="legend" data-i18n="TAB_ABOUT/LEGEND_ABOUT"></div> <div class="row"> <div class="span4"> <div class="rl-logo"></div> <div> 2024 © <span data-i18n="TAB_ABOUT/LABEL_ALL_RIGHTS_RESERVED"></span> <br> <a class="g-ui-link" href="https://snappymail.eu/" target="_blank" style="padding-left: 0">https://snappymail.eu/</a> </div> </div> <div class="span6"> <h1 style="margin-bottom: 0;">SnappyMail</h1> <h4 style="margin-top: 0;" data-bind="text: version"></h4> <h4 style="color: #aaa; font-weight: normal;">An advanced fork of RainLoop</h4> <h4 style="color: #aaa; font-weight: normal;" data-i18n="TAB_ABOUT/LABEL_TAG_HINT"></h4> <a class="btn" target="_blank" href="https://github.com/sponsors/the-djmaze"> <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"> <path stroke="#db61a2" fill="#db61a2" d="m8 14.25.345.666a.75.75 0 0 1-.69 0l-.008-.004-.018-.01a7.152 7.152 0 0 1-.31-.17 22.055 22.055 0 0 1-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.066 22.066 0 0 1-3.744 2.584l-.018.01-.006.003h-.002ZM4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.58 20.58 0 0 0 8 13.393a20.58 20.58 0 0 0 3.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 0 1-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5Z"></path> </svg> <span style="margin-left:0.25rem">Sponsor</span> </a> <div> <hr> <div data-bind="visible: 'error' === statusType()"> <i class="fontastic" style="color:red">⚠</i> <span data-bind="text: errorDesc"></span> </div> <div data-bind="visible: 'available' === statusType()"> <i class="fontastic" style="color:orange">⚠</i> <span data-bind="html: coreVersionHtmlDesc"></span> <br> <span data-bind="if: coreWarning"> <br> <i class="fontastic" style="color:red">⚠</i> <b data-i18n="HINTS/WARNING"></b> <span data-i18n="TAB_ABOUT/HINT_READ_CHANGE_LOG"></span> <br> </span> <br> <a class="btn" href="https://github.com/the-djmaze/snappymail/releases" target="_blank" data-i18n="TAB_ABOUT/BUTTON_RELEASES"></a> <a class="btn" data-bind="visible: coreUpdatable, click: updateCoreData" data-i18n="GLOBAL/UPDATE"></a> <a class="btn" href="https://github.com/the-djmaze/snappymail/releases/latest" data-bind="visible: !coreUpdatable()" data-i18n="GLOBAL/UPDATE"></a> </div> <div data-bind="visible: 'up-to-date' === statusType()"> <i style="color: green">✔</i> <span data-i18n="TAB_ABOUT/HINT_IS_UP_TO_DATE"></span> </div> <div data-bind="visible: 'updating' === statusType()"> <i class="icon-spinner"></i> <span data-i18n="TAB_ABOUT/LABEL_UPDATING"></span>… </div> <div data-bind="visible: 'checking' === statusType()"> <i class="icon-spinner"></i> <span data-i18n="TAB_ABOUT/LABEL_CHECKING"></span>… </div> </div> <h3>System</h3> <table class="table table-hover table-bordered"><tbody> <tr> <td>Average load past minute</td> <td data-bind="text: load1"></td> </tr> <tr> <td>Average load past 5 minutes</td> <td data-bind="text: load5"></td> </tr> <tr> <td>Average load past 15 minutes</td> <td data-bind="text: load15"></td> </tr> </tbody> </table> <h3>PHP</h3> <div data-bind="hidden: php64" class="alert"> <i class="fontastic" style="color:red">⚠</i> PHP is running in 32bit mode. <a href="https://github.com/the-djmaze/snappymail/issues/830#issuecomment-1372112793">read here</a> </div> <table class="table table-hover table-bordered"><thead><tr> <th>Extension</th> <th>Loaded</th> </tr></thead><tbody data-bind="foreach: phpextensions"> <tr> <td data-bind="text: name"></td> <td data-bind="text: loaded ? '✔' : '❌'"></td> </tr> </tbody> </table> </div> </div> </div> </template><template id="AdminSettingsBranding"><div class="form-horizontal"> <div class="legend" data-i18n="TAB_BRANDING/LEGEND_BRANDING"></div> <div class="control-group"> <label data-i18n="TAB_BRANDING/LABEL_PAGE_TITLE"></label> <input class="span5" type="text" autocorrect="off" data-bind="textInput: title, saveTrigger: titleTrigger"> </div> <div class="control-group"> <label data-i18n="TAB_BRANDING/LABEL_LOADING_DESCRIPTION"></label> <input class="span5" type="text" autocorrect="off" data-bind="textInput: loadingDescription, saveTrigger: loadingDescriptionTrigger"> </div> <div class="control-group"> <label data-i18n="TAB_BRANDING/LABEL_FAVICON_URL"></label> <input class="span5" type="text" placeholder="https://" autocorrect="off" data-bind="textInput: faviconUrl, saveTrigger: faviconUrlTrigger"> </div> </div> </template><template id="AdminSettingsConfig"><div class="legend">application.ini</div> <form method="POST" data-bind="submit: saveConfig" spellcheck="false" autocomplete="off" autocapitalize="none"> <input type="search" data-bind="textInput: search" data-i18n="[placeholder]GLOBAL/SEARCH"> <table class="table table-hover table-bordered"> <!-- ko foreach: config --> <tbody> <tr><th colspan="3" data-bind="text: name"></th></tr> <!-- ko foreach: items --> <tr> <td data-bind="text: name"></td> <td> <!-- ko if: 'checkbox' == type --> <input type="checkbox" data-bind="attr: {name: key, checked: value}"> <!-- /ko --> <!-- ko if: options --> <select data-bind="attr: {name: key}, options: options, value: value"></select> <!-- /ko --> <!-- ko if: 'checkbox' != type && !options --> <input data-bind="attr: {name: key, type: type}, value: value" autocorrect="off"> <!-- /ko --> <em data-bind="text: comment, visible: comment"></em> </td> </tr> <!-- /ko --> </tbody> <!-- /ko --> </table> <button class="btn" data-i18n="GLOBAL/SAVE" data-bind="css:{'btn-success':saved()},attr:{'data-icon':saved()?'✔':'💾'}"></button> </form> </template><template id="AdminSettingsContacts"><div class="row" data-bind="visible: !contactsSupported"> <div class="alert span8" style="margin-top: 10px;"> <h4 data-i18n="TAB_CONTACTS/ALERT_NOTICE"></h4> <div data-i18n="[html]TAB_CONTACTS/HTML_ALERT_DOES_NOT_SUPPORTED"></div> </div> </div> <form class="form-horizontal" spellcheck="false" data-bind="visible: contactsSupported"> <div class="legend" data-i18n="TAB_CONTACTS/LEGEND_CONTACTS"></div> <div class="control-group"> <div> <div data-bind="component: { name: 'Checkbox', params: { value: contactsEnable, label: 'TAB_CONTACTS/LABEL_ENABLE_CONTACTS' } }"></div> <div data-bind="component: { name: 'Checkbox', params: { value: contactsSync, label: 'TAB_CONTACTS/LABEL_ALLOW_SYNC' } }"></div> </div> </div> <div class="control-group"> <label data-i18n="TAB_CONTACTS/SUGGESTIONS_LIMIT"></label> <div> <input type="number" min="5" max="50" step="1" class="span1" data-bind="textInput: contactsSuggestionsLimit">   <span data-bind="saveTrigger: contactsSuggestionsLimitTrigger"></span> </div> </div> </form> <form class="form-horizontal" spellcheck="false" data-bind="visible: contactsSupported"> <div class="legend" data-i18n="TAB_CONTACTS/LEGEND_STORAGE"></div> <div class="control-group"> <label data-i18n="TAB_CONTACTS/LABEL_STORAGE_TYPE"></label> <div data-bind="component: { name: 'Select', params: { options: contactsTypesOptions, value: mainContactsType, trigger: contactsPdoTypeTrigger, optionsText: 'name', optionsValue: 'id' } }"></div> </div> <div data-bind="visible: 'sqlite' !== contactsPdoType()"> <div class="control-group"> <label data-i18n="TAB_CONTACTS/LABEL_STORAGE_DSN"></label> <div> <input type="text" class="span6" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="value: contactsPdoDsn, saveTrigger: contactsPdoDsnTrigger" placeholder="mysql:host=127.0.0.1;port=3306;dbname=snappymail"> </div> </div> <div class="control-group"> <label data-i18n="TAB_CONTACTS/LABEL_STORAGE_USER"></label> <div> <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="value: contactsPdoUser, saveTrigger: contactsPdoUserTrigger"> </div> </div> <div class="control-group"> <label data-i18n="TAB_CONTACTS/LABEL_STORAGE_PASSWORD"></label> <div> <input type="password" autocomplete="current-password" autocorrect="off" autocapitalize="off" data-bind="value: contactsPdoPassword, saveTrigger: contactsPdoPasswordTrigger"> </div> </div> <div data-bind="visible: 'mysql' === contactsPdoType()"> <div class="control-group"> <label>SSL CA</label> <div> <textarea placeholder="PEM formatted" data-bind="value: contactsMySQLSSLCA, saveTrigger: contactsMySQLSSLCATrigger"></textarea> </div> </div> <div class="control-group"> <label></label> <div data-bind="component: { name: 'Checkbox', params: { value: contactsMySQLSSLVerify, label: 'VERIFY SERVER CERT' } }"></div> </div> <div class="control-group"> <label>SSL CIPHER</label> <div> <input type="text" placeholder="HIGH" data-bind="value: contactsMySQLSSLCiphers, saveTrigger: contactsMySQLSSLCiphersTrigger"> </div> </div> </div> </div> <div data-bind="visible: 'sqlite' === contactsPdoType()"> <div class="control-group"> <label></label> <div data-bind="component: { name: 'Checkbox', params: { value: contactsSQLiteGlobal, label: 'TAB_CONTACTS/SQLITE_GLOBAL' } }"></div> </div> <div class="control-group" data-bind="visible: contactsSQLiteGlobal"> <div class="alert"> <h4 data-i18n="TAB_CONTACTS/ALERT_NOTICE"></h4> <div data-i18n="[html]TAB_CONTACTS/HTML_ALERT_DO_NOT_USE_THIS_DATABASE"></div> </div> </div> </div> <div data-bind="visible: contactsPdoType"> <div class="control-group"> <label></label> <a class="btn" data-bind="command: testContactsCommand, css: { 'btn-success': testContactsSuccess, 'btn-danger': testContactsError }"> <i class="fontastic" data-bind="css: {'icon-spinner': testing()}">ℹ</i> <span data-i18n="GLOBAL/TEST"></span> </a> </div> </div> <div class="alert span8" data-bind="text: testContactsErrorMessage, visible: '' !== testContactsErrorMessage()"></div> </form> </template><template id="AdminSettingsDomains"><div class="legend"> <span data-i18n="TAB_DOMAINS/LEGEND_DOMAINS"></span> <i class="icon-spinner" style="margin: 5px" data-bind="visible: domains.loading"></i> </div> <p data-i18n="[html]TAB_DOMAINS/HTML_DOMAINS_HELPER"></p> <table class="table table-hover b-admin-domains-list-table" data-bind="i18nUpdate: domains"> <colgroup> <col> <col style="width: 140px"> <col style="width: 1%"> <col style="width: 1%"> </colgroup> <tbody data-bind="foreach: domains"> <tr data-bind="css: {'disabled': disabled }"> <td class="e-action"> <span class="domain-name" data-bind="text: name"></span> <span class="domain-alias" data-bind="if: alias">(alias)</span> </td> <td> <a class="btn btn-small btn-danger button-confirm-delete" data-bind="css: {'delete-access': askDelete()}, click: function(oDomain) { $root.deleteDomain(oDomain); }" data-i18n="TAB_DOMAINS/DELETE_ARE_YOU_SURE"></a> </td> <td> <span class="delete-domain fontastic" data-bind="visible: !askDelete(), click: function (oDomain) { $root.domainForDeletion(oDomain); }">🗑</span> </td> <td class="disabled-domain fontastic" data-bind="click: function (oDomain) { $root.disableDomain(oDomain); }, text: disabled() ? '☐' : '☑'"></td> </tr> </tbody> <tfoot> <tr><td colspan="4" style="text-align:right"> <a class="btn" data-bind="click: createDomain" data-icon="✚" data-i18n="TAB_DOMAINS/BUTTON_ADD_DOMAIN"></a>    <a class="btn" data-bind="click: createDomainAlias" data-icon="✚" data-i18n="TAB_DOMAINS/BUTTON_ADD_ALIAS"></a> </td></tr> </tfoot> </table> <div> <input data-i18n="[placeholder]GLOBAL/USERNAME" data-bind="textInput: username"> <button class="btn" data-i18n="GLOBAL/TEST" data-bind="click: testUsername"></button> </div> </template><template id="AdminSettingsGeneral"><div class="row" data-bind="visible: weakPassword"> <div class="alert alert-warning span8" style="margin-top: 10px;"> <h4 data-i18n="TAB_GENERAL/ALERT_WARNING"></h4> <br> <div data-i18n="[html]TAB_GENERAL/HTML_ALERT_WEAK_PASSWORD"></div> </div> </div> <div class="row" data-bind="visible: dataFolderAccess"> <div class="alert alert-error span8" style="margin-top: 10px;"> <h4 data-i18n="TAB_GENERAL/ALERT_WARNING"></h4> <div data-i18n="TAB_GENERAL/ALERT_DATA_ACCESS"></div> <a href="https://github.com/the-djmaze/snappymail/wiki/Installation-instructions#secure-data-folder" target="_blank"><strong>https://github.com/the-djmaze/snappymail/wiki/Installation-instructions</strong></a> </div> </div> <div class="form-horizontal"> <div class="legend" data-i18n="TAB_GENERAL/LEGEND_INTERFACE"></div> <div class="control-group"> <label data-i18n="TAB_GENERAL/LABEL_LANGUAGE"></label> <div> <span class="select" tabindex="0" data-bind="text: languageFullName, click: selectLanguage, onSpace: selectLanguage, onEnter: selectLanguage"></span> <span data-bind="saveTrigger: languageTrigger"></span> </div> </div> <div class="control-group"> <label data-i18n="TAB_GENERAL/LABEL_LANGUAGE_ADMIN"></label> <div> <span class="select" tabindex="0" data-bind="text: languageAdminFullName, click: selectLanguageAdmin, onSpace: selectLanguageAdmin, onEnter: selectLanguageAdmin"></span> <span data-bind="saveTrigger: languageAdminTrigger"></span> </div> </div> <div class="control-group"> <label data-i18n="TAB_GENERAL/LABEL_THEME"></label> <div data-bind="component: { name: 'Select', params: { options: themesOptions, value: theme, trigger: themeTrigger, optionsText: 'optText', optionsValue: 'optValue', size: 2 } }"></div> </div> <div class="control-group"> <div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_ALLOW_LANGUAGES_ON_SETTINGS', value: allowLanguagesOnSettings } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_ALLOW_THEMES_ON_SETTINGS', value: capaThemes } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_ALLOW_BACKGROUND_ON_SETTINGS', value: capaUserBackground } }"></div> </div> </div> <div class="control-group"> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_SHOW_THUMBNAILS', value: capaAttachmentThumbnails } }"></div> </div> <div class="legend" data-i18n="TAB_GENERAL/LEGEND_MAIN"></div> <div class="control-group"> <label data-i18n="TAB_GENERAL/LABEL_ATTACHMENT_SIZE_LIMIT"></label> <div> <input type="number" min="1" step="1" class="span1" data-bind="textInput: attachmentLimit">   <span data-i18n="MB"></span> <span data-bind="saveTrigger: attachmentLimitTrigger"></span> <br> <br> <div class="alert alert-info"> <b>PHP: </b><!-- ko text: uploadDataDesc --><!-- /ko --> </div> </div> </div> <div class="control-group"> <div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_ALLOW_ADDITIONAL_ACCOUNTS', value: capaAdditionalAccounts } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_GENERAL/LABEL_ALLOW_IDENTITIES', value: capaIdentities } }"></div> </div> </div> </div> </template><template id="AdminSettingsLogin"><div class="form-horizontal"> <div class="legend" data-i18n="TAB_LOGIN/LEGEND_LOGIN_SCREEN"></div> <div class="control-group"> <label data-i18n="TAB_LOGIN/LABEL_DEFAULT_DOMAIN"></label> <input class="span3" type="text" spellcheck="false" autocomplete="off" autocapitalize="none" autocorrect="off" data-bind="textInput: loginDefaultDomain, saveTrigger: loginDefaultDomainTrigger"> </div> <div class="control-group"> <div> <div data-bind="component: { name: 'Checkbox', params: { value: determineUserDomain, label: 'TAB_LOGIN/LABEL_DETERMINE_USER_DOMAIN' } }"></div> <div data-bind="component: { name: 'Checkbox', params: { value: allowLanguagesOnLogin, label: 'TAB_LOGIN/LABEL_ALLOW_LANGUAGES_ON_LOGIN' } }"></div> <div data-bind="visible: allowLanguagesOnLogin, component: { name: 'Checkbox', params: { enable: allowLanguagesOnLogin, value: determineUserLanguage, label: 'TAB_LOGIN/LABEL_DETERMINE_USER_LANGUAGE' } }"></div> </div> </div> </div> </template><template id="AdminSettingsPackages"><div class="legend"> <span data-i18n="SETTINGS_LABELS/PACKAGES"></span> <i class="icon-spinner" style="margin: 5px" data-bind="visible: packages.loading"></i> </div> <div class="alert" style="margin-top: 10px;" data-bind="visible: !packages.real() && !packages.loading()"> <div data-i18n="TAB_PACKAGES/ALERT_CANNOT_ACCESS_REPOSITORY"></div> <!-- ko text: packages.error() --><!-- /ko --> </div> <div class="alert" style="margin-top: 10px;" data-bind="visible: packagesError()"> <a href="#" class="close" data-bind="click: function () { packagesError('') }">×</a> <span data-bind="text: packagesError"></span> </div> <div data-bind="component: { name: 'Checkbox', params: { value: pluginsEnable, label: 'TAB_PACKAGES/LABEL_ENABLE_PLUGINS' } }"></div> <br> <input type="search" data-bind="textInput: search" data-i18n="[placeholder]GLOBAL/SEARCH"> <br> <div data-bind="visible: packagesUpdate().length"> <div class="legend"> <span data-i18n="TAB_PACKAGES/LEGEND_AVAILABLE_FOR_UPDATE"></span> (<span data-bind="text: packagesUpdate().length"></span>) </div> <div data-bind="template: { name: 'AdminSettingsPackagesTable', data: {f: packagesUpdate} }"></div> </div> <div id="packages-installed" data-bind="visible: packagesCurrent().length, css: {'disabled': !pluginsEnable()}"> <div class="legend" data-i18n="TAB_PACKAGES/LEGEND_INSTALLED_PACKAGES"></div> <div data-bind="template: { name: 'AdminSettingsPackagesTable', data: {f: packagesCurrent} }"></div> </div> <div data-bind="visible: packagesAvailable().length"> <div class="legend" data-i18n="TAB_PACKAGES/LEGEND_AVAILABLE_FOR_INSTALLATION"></div> <div data-bind="template: { name: 'AdminSettingsPackagesTable', data: {f: packagesAvailable} }"></div> </div> </template><template id="AdminSettingsPackagesTable"><table class="table table-hover table-bordered" data-bind="i18nUpdate: f"> <colgroup> <col> <col style="width: 100px"> <col style="width: 80px"> </colgroup> <tbody data-bind="foreach: f"> <tr data-bind="css: {'disabled': !enabled() }"> <td> <div> <span class="package-name" data-bind="text: name"></span> <a class="package-configure fontastic" data-bind="visible: installed">⚙</a> <a class="package-active fontastic" data-bind="visible: installed, text: enabled() ? '☑' : '☐'"></a> <span class="package-installed" data-bind="text: installed"></span> </div> <div class="package-desc" data-bind="text: desc"></div> </td> <td data-bind="text: version"></td> <td> <a class="fontastic" data-bind="visible: !loading() && canBeUpdated, click: function () { $root.installPackage($data); }">📥</a>   <a class="fontastic" data-bind="visible: !loading() && canBeDeleted, click: function () { $root.deletePackage($data); }">🗑</a> <i class="icon-spinner" data-bind="visible: loading"></i> </td> </tr> </tbody> </table> </template><template id="AdminSettingsPluginProperty"> <label data-bind="text: label, visible: 5 !== type"></label> <!-- ko if: 0 === type --> <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="value: value, attr: {placeholder: placeholder}"> <!-- /ko --> <!-- ko if: 1 === type --> <input type="number" step="1" data-bind="value: value, attr: {placeholder: placeholder}"> <!-- /ko --> <!-- ko if: 3 === type --> <input type="password" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="value: value, attr: {placeholder: placeholder}"> <!-- /ko --> <!-- ko if: 2 === type --> <textarea rows="5" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="value: value, attr: {placeholder: placeholder }"></textarea> <!-- /ko --> <!-- ko if: 4 === type --> <select data-bind="options: options, value: value"></select> <!-- /ko --> <!-- ko if: 5 === type --> <div data-bind="component: { name: 'Checkbox', params: { value: value, label: label } }"></div> <!-- /ko --> <!-- ko if: 6 === type --> <input type="url" data-bind="value: value, attr: {placeholder: placeholder}"> <!-- /ko --> <!-- ko if: 8 === type --> <select data-bind="options: options, optionsText: 'name', optionsValue: 'id', value: value"></select> <!-- /ko --> <!-- ko if: '' !== desc --> <span tabindex="0" class="help-block"><span data-bind="text: desc"></span></span> <!-- /ko --> </template><template id="AdminSettingsSecurity"><div class="legend" data-i18n="TAB_SECURITY/LEGEND_SECURITY"></div> <div class="form-horizontal"> <div class="control-group"> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_SECURITY/LABEL_USE_IMAGE_PROXY', value: proxyExternalImages } }"></div> </div> </div> <div class="legend" data-i18n="TAB_SECURITY/CRYPTO"></div> <div class="form-horizontal"> <div class="control-group"> <div> <div data-bind="component: { name: 'Checkbox', params: { label: gnuPGversion, value: capaGnuPG } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'OpenPGP.js', value: capaOpenPGP } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'TAB_SECURITY/LABEL_AUTO_VERIFY', value: autoVerifySignatures } }"></div> </div> </div> </div> <form class="form-horizontal" spellcheck="false"> <div class="legend" data-i18n="TAB_SECURITY/LEGEND_ADMIN_PANEL_ACCESS_CREDENTIALS"></div> <div class="control-group" data-bind="css: {'error': adminLoginError}"> <label data-i18n="GLOBAL/USERNAME"></label> <input type="text" autocomplete="username" autocorrect="off" autocapitalize="off" data-bind="textInput: adminLogin"> </div> <div class="control-group"> <label data-i18n="TAB_SECURITY/LABEL_CURRENT_PASSWORD"></label> <input type="password" autocomplete="current-password" autocorrect="off" autocapitalize="off" data-bind="textInput: adminPassword"> </div> <div class="control-group" data-bind="css: {'error': adminPasswordNewError}"> <label data-i18n="TAB_SECURITY/LABEL_NEW_PASSWORD"></label> <input type="password" autocomplete="new-password" autocorrect="off" autocapitalize="off" data-bind="textInput: adminPasswordNew"> </div> <div class="control-group" data-bind="css: {'error': adminPasswordNewError}"> <label data-i18n="TAB_SECURITY/LABEL_REPEAT_PASSWORD"></label> <input type="password" autocomplete="new-password" autocorrect="off" autocapitalize="off" data-bind="textInput: adminPasswordNew2"> </div> <div class="control-group"> <label data-i18n="LOGIN/LABEL_TOTP"></label> <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" pattern="[A-Z2-7]{16,}" data-bind="textInput: adminTOTP"> <button type="button" data-bind="visible:!adminTOTP(), click:generateTOTP">Generate</button> </div> <div class="control-group"> <label></label> <pre data-bind="text: viewQRCode" style="font-family:var(--fontMono);font-size:11px;letter-spacing:-1px;line-height:1;"></pre> </div> <div class="control-group"> <label></label> <a class="btn" data-bind="command: saveAdminUserCommand, css: { 'btn-success': saveSuccess, 'btn-danger': saveError }" data-icon="🔑" data-i18n="GLOBAL/SAVE"></a> </div> </form> </template><template id="PopupsDomain"><header> <a href="#" class="close" data-bind="click: close">×</a> <h3 data-bind="text: headerText"></h3> </header> <form class="modal-body" action="#/" spellcheck="false" onsubmit="return false;"> <div class="row" data-bind="hidden: edit" style="margin-bottom: 20px;"> <div class="span5"> <span data-i18n="POPUPS_DOMAIN/LABEL_NAME"></span> <span style="opacity:0.7"> (<span data-i18n="POPUPS_DOMAIN/NAME_HELPER"></span>)</span> <br> <input name="Name" type="text" class="span4" autofocus="" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="textInput: name"> <div class="alert-error" data-bind="visible: savingError, text: savingError"></div> <button class="btn" type="button" data-bind="click: autoconfig"> <i class="fontastic" data-bind="css: {'icon-spinner': detectingConfig()}">⚙</i> autoconfig </button> </div> <div class="span5 alert-info domain-desc" data-bind="visible: domainDesc, html: domainDesc"></div> </div> <div class="form-horizontal domain-form"> <div class="tabs"> <input type="radio" name="tabs" id="tab-imap" checked> <label for="tab-imap" role="tab" tabindex="0" data-bind="css: { 'testing-done': testingDone, 'testing-error': testingImapError }" >IMAP</label> <div class="tab-content" role="tabpanel" aria-hidden="false"> <div class="alert alert-error" data-bind="visible: testingImapError, text: testingImapError"></div> <div class="row"> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SERVER"></span> <br> <input name="IMAP[host]" type="text" class="span3" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="textInput: imapHost, hasfocus: imapHostFocus"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SECURE"></span> <br> <select name="IMAP[type]" class="span2" data-bind="value: imapType"> <option value="0" data-i18n="POPUPS_DOMAIN/SECURE_OPTION_NONE"></option> <option value="1">SSL/TLS</option> <option value="2">STARTTLS</option> </select> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_PORT"></span> <br> <input name="IMAP[port]" type="number" style="width:6em" data-bind="textInput: imapPort"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/TIMEOUT"></span> <br> <input name="IMAP[timeout]" type="number" min="5" step="1" style="width:6em" data-bind="textInput: imapTimeout"> </div> </div> <br> <div style="display: inline-block;" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_USE_SHORT_LOGIN', value: imapShortLogin } }"></div> <span style="opacity:0.7"> (user@example.com → user)</span> <br> <div style="display: inline-block;" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_LOWERCASE_LOGIN', value: imapLowerLogin } }"></div> <span style="opacity:0.7"> (USER@example.com → user@example.com)</span> <h4>SSL/TLS</h4> <div data-bind="component: { name: 'Checkbox', params: { value: imapSslVerify_peer, label: 'TAB_SECURITY/LABEL_REQUIRE_VERIFICATION' } }"></div> <div data-bind="component: { name: 'Checkbox', params: { enable: imapSslVerify_peer, value: imapSslAllow_self_signed, label: 'TAB_SECURITY/LABEL_ALLOW_SELF_SIGNED' } }"></div> <h4> <span data-i18n="POPUPS_DOMAIN/DISABLE_CAPABILITIES"></span> <a style="margin-left:0.5em" href="https://github.com/the-djmaze/snappymail/wiki/IMAP-capabilities" target="_blank">ⓘ</a> </h4> <div data-bind="foreach: imapCapabilities" style="columns: 16em auto"> <div> <label class="e-component e-checkbox material-design"> <div> <input type="checkbox" data-bind="checked: $parent.imapDisabled_capabilities,  value: $data"> <div role="checkbox"></div> </div> <span data-bind="text: $data"></span> </label> </div> </div> <h4 data-i18n="POPUPS_DOMAIN/LIMITS"></h4> <div class="control-group"> <label data-i18n="POPUPS_DOMAIN/MESSAGES"></label> <input name="IMAP[message_list_limit]" type="number" min="0" step="1" class="span2" data-bind="textInput: imapMessage_list_limit"> </div> <!-- <div class="control-group"> <label data-i18n="POPUPS_DOMAIN/FOLDERS"></label> <input name="IMAP[folder_list_limit]" type="number" min="0" step="1" class="span1" data-bind="textInput: imapFolder_list_limit"> </div>         "use_expunge_all_on_delete": false,         "fast_simple_search": true,         "force_select": false,         "message_all_headers": false, <div class="control-group"> <label>Search filter</label> <input name="IMAP[search_filter]" type="text" class="span3" data-bind="textInput: imapSearch_filter"> </div> --> <div class="control-group"> <label data-i18n="POPUPS_DOMAIN/VALID_SPAM_HEADERS"></label> <input name="IMAP[spam_headers]" type="text" class="span3" data-bind="textInput: imapSpam_headers" title="rspamd,spamassassin,bogofilter"> </div> <div class="control-group"> <label data-i18n="POPUPS_DOMAIN/VALID_VIRUS_HEADERS"></label> <input name="IMAP[virus_headers]" type="text" class="span3" data-bind="textInput: imapVirus_headers" title="rspamd,clamav"> </div> </div> <input type="radio" name="tabs" id="tab-smtp"> <label for="tab-smtp" role="tab" tabindex="0" data-bind="css: { 'testing-done': testingDone, 'testing-error': testingSmtpError }" >SMTP</label> <div class="tab-content" role="tabpanel" aria-hidden="true"> <div class="alert alert-error" data-bind="visible: testingSmtpError, text: testingSmtpError"></div> <div data-bind="visible: !smtpUsePhpMail()"> <div class="row"> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SERVER"></span> <br> <input name="SMTP[host]" type="text" class="span3" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="textInput: smtpHost, hasfocus: smtpHostFocus"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SECURE"></span> <br> <select name="SMTP[type]" class="span2" data-bind="value: smtpType"> <option value="0" data-i18n="POPUPS_DOMAIN/SECURE_OPTION_NONE"></option> <option value="1">SSL/TLS</option> <option value="2">STARTTLS</option> </select> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_PORT"></span> <br> <input name="SMTP[port]" type="number" style="width:6em" data-bind="textInput: smtpPort"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/TIMEOUT"></span> <br> <input name="SMTP[timeout]" type="number" min="5" step="1" style="width:6em" data-bind="textInput: smtpTimeout"> </div> </div> <br> <div style="display: inline-block;" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_USE_SHORT_LOGIN', value: smtpShortLogin } }"></div> <span style="opacity:0.7"> (user@example.com → user)</span> <br> <div style="display: inline-block;" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_LOWERCASE_LOGIN', value: smtpLowerLogin } }"></div> <span style="opacity:0.7"> (USER@example.com → user@example.com)</span> <div data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_USE_AUTH', value: smtpUseAuth } }"></div> <br> </div> <div data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_SET_SENDER', value: smtpSetSender } }"></div> <div data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_AUTH_PLAIN_LINE', value: smtpAuthPlainLine } }"></div> <div style="display: inline-block;" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_USE_PHP_MAIL', value: smtpUsePhpMail } }"></div> <span style="color:red"> (<span data-i18n="HINTS/BETA"></span>)</span> <h4>SSL/TLS</h4> <div data-bind="component: { name: 'Checkbox', params: { value: smtpSslVerify_peer, label: 'TAB_SECURITY/LABEL_REQUIRE_VERIFICATION' } }"></div> <div data-bind="component: { name: 'Checkbox', params: { enable: smtpSslVerify_peer, value: smtpSslAllow_self_signed, label: 'TAB_SECURITY/LABEL_ALLOW_SELF_SIGNED' } }"></div> </div> <input type="radio" name="tabs" id="tab-sieve"> <label for="tab-sieve" role="tab" tabindex="0" data-bind="css: { 'testing-done': testingDone, 'testing-error': testingSieveError }"> <i class="icon-filter"></i> SIEVE </label> <div class="tab-content" role="tabpanel" aria-hidden="true"> <div class="alert alert-error" data-bind="visible: testingSieveError, text: testingSieveError"></div> <div class="row"> <div class="span5" data-bind="component: { name: 'Checkbox', params: { label: 'POPUPS_DOMAIN/LABEL_ALLOW_SIEVE_SCRIPTS', value: sieveEnabled } }"></div> </div> <div data-bind="visible: sieveEnabled"> <div class="row"> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SERVER"></span> <br> <input name="Sieve[host]" type="text" class="span3" autocomplete="off" autocorrect="off" autocapitalize="off" data-bind="textInput: sieveHost, hasfocus: sieveHostFocus"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/LABEL_SECURE"></span> <br> <select name="Sieve[type]" class="span2" data-bind="value: sieveType"> <option value="0" data-i18n="POPUPS_DOMAIN/SECURE_OPTION_NONE"></option> <option value="1">SSL/TLS</option> <option value="2">STARTTLS</option> </select> </div> <div class="span"> <span name="Sieve[port]" data-i18n="POPUPS_DOMAIN/LABEL_PORT"></span> <br> <input type="number" style="width:6em" data-bind="textInput: sievePort"> </div> <div class="span"> <span data-i18n="POPUPS_DOMAIN/TIMEOUT"></span> <br> <input name="Sieve[timeout]" type="number" min="5" step="1"  style="width:6em" data-bind="textInput: sieveTimeout"> </div> </div> <h4 data-i18n="LOGIN/LABEL_LOGIN"></h4> <div data-bind="component: { name: 'Checkbox', params: { value: sieveAuthLiteral, label: 'Use LITERAL+' } }"></div> </div> </div> <input type="radio" name="tabs" id="tab-whitelist"> <label for="tab-whitelist" role="tab" tabindex="0" data-icon="👥" data-i18n="POPUPS_DOMAIN/BUTTON_WHITE_LIST"></label> <div class="tab-content" role="tabpanel" aria-hidden="true"> <div class="alert" data-i18n="POPUPS_DOMAIN/WHITE_LIST_ALERT"></div> <textarea class="input-xxlarge" style="width: 100%" rows="8" data-bind="value: whiteList" tabindex="-1" placeholder="@example.com&#10;user@example.org&#10;username"></textarea> </div> </div> </div> </form> <footer> <a class="btn" data-bind="command: testConnectionCommand, css: {    'btn-success': testingDone() && !testingImapError() && !testingSmtpError(),    'btn-danger': testingDone() && (testingImapError() || testingSmtpError()) }"> <i class="fontastic" data-bind="css: {'icon-spinner': testing()}">ℹ</i> <span data-i18n="GLOBAL/TEST"></span> </a> <a class="btn buttonClose" data-bind="click: close, visible: edit()" data-icon="✖" data-i18n="GLOBAL/CLOSE"></a> <a class="btn buttonClose" data-bind="click: close, visible: !edit()" data-icon="✖" data-i18n="GLOBAL/CANCEL"></a> <a class="btn" data-bind="command: createOrAddCommand"> <i class="fontastic" data-bind="css: {'icon-spinner': saving()}">✔</i> <span data-i18n="GLOBAL/SAVE"></span> </a> </footer> </template><template id="PopupsDomainAlias"><header> <a href="#" class="close" data-bind="click: close">×</a> <h3 data-i18n="POPUPS_DOMAIN_ALIAS/TITLE_ADD_DOMAIN_ALIAS"></h3> </header> <form id="DomainAlias" class="modal-body" spellcheck="false" autocomplete="off" autocapitalize="none" data-bind="submit: createCommand" > <div class="control-group" data-bind="css: {error: '' !== savingError()}"> <label data-i18n="POPUPS_DOMAIN_ALIAS/LABEL_ALIAS"></label> <div> <input class="span4" type="text" autocorrect="off" data-bind="textInput: name"> <div class="alert-error" data-bind="visible: '' !== savingError(), text: savingError"></div> </div> </div> <div class="control-group"> <label data-i18n="POPUPS_DOMAIN_ALIAS/LABEL_DOMAIN"></label> <div data-bind="component: { name: 'Select', params: { options: domainsOptions, value: alias, optionsText: 'optText', optionsValue: 'optValue', size: 4 } }"></div> </div> </form> <footer> <button class="btn buttonClose" data-bind="click: close" data-icon="✖" data-i18n="GLOBAL/CLOSE"></button> <button class="btn" data-bind="command: createCommand"> <i class="fontastic" data-bind="visible: !saving()">✚</i> <i class="icon-spinner" data-bind="visible: saving"></i> <span data-i18n="GLOBAL/ADD"></span> </button> </footer> </template><template id="PopupsPlugin"><header> <a href="#" class="close" data-bind="click: close">×</a> <h4> <span data-i18n="POPUPS_PLUGIN/TITLE_PLUGIN"></span> "<span data-bind="text: name"></span>" </h4> <span data-bind="visible: hasReadme, text: readme"></span> </header> <div class="modal-body"> <div class="tabs"> <input type="radio" name="tabs" id="tab-extension-config" checked> <label for="tab-extension-config" role="tab" tabindex="0">Config</label> <div class="tab-content" role="tabpanel" aria-hidden="false"> <form class="form-horizontal plugin-form" action="#/" spellcheck="false" onsubmit="return false;"> <div class="alert alert-info" data-bind="visible: !hasConfiguration()" data-i18n="POPUPS_PLUGIN/DESC_NOTHING_TO_CONFIGURE"></div> <div class="alert" data-bind="visible: '' !== saveError()"> <a href="#" class="close" data-bind="click: hideError">×</a> <span data-bind="text: saveError"></span> </div> <div data-bind="foreach: config, visible: hasConfiguration"> <!-- ko if: 7 == type --> <details open=""> <summary class="legend" data-bind="text: label"></summary> <div data-bind="foreach: config"> <div class="control-group" data-bind="template: { name: 'AdminSettingsPluginProperty' }"></div> </div> </details> <!-- /ko --> <!-- ko if: 7 != type --> <div class="control-group" data-bind="template: { name: 'AdminSettingsPluginProperty' }"></div> <!-- /ko --> </div> </form> </div> <input type="radio" name="tabs" id="tab-extension-info"> <label for="tab-extension-info" role="tab" tabindex="0">Info</label> <div class="tab-content" role="tabpanel" aria-hidden="true"><tbody> <table><tbody> <tr><td>Author</td><td data-bind="text: author"></td></tr> <tr><td>Website</td><td><a data-bind="attr:{href: url}, text: url"></a></td></tr> <tr><td>Version</td><td data-bind="text: version"></td></tr> <tr><td>Date</td><td data-bind="text: released"></td></tr> </tbody> </table> </div> </div> </div> <footer> <a class="btn buttonClose" data-bind="click: close" data-icon="✖" data-i18n="GLOBAL/CLOSE"></a> <a class="btn" data-bind="command: saveCommand, visible: hasConfiguration" data-icon="✔" data-i18n="GLOBAL/SAVE"></a> </footer> </template><template id="Paginator"><nav class="e-paginator g-ui-user-select-none" data-bind="foreach: $data"> <a data-bind="css: { 'current': current }, attr: { title: title }, text: name"></a> </nav> </template><template id="PopupsAsk"><div class="modal-body"> <div data-bind="html: askDesc"></div> <form class="form-horizontal" data-bind="visible: askPass() || askUsername(), submit: yesClick" style="margin: 2em 0 0" id="AskForm"> <div class="control-group" data-bind="visible: askUsername"> <label data-i18n="GLOBAL/USERNAME"></label> <input type="text" data-bind="value: username"> </div> <div class="control-group" data-bind="visible: askPass"> <label data-i18n="GLOBAL/PASSWORD"></label> <input type="password" data-bind="value: passphrase"> </div> </form> </div> <footer> <button class="btn buttonNo" data-bind="click: noClick, text: noButton" data-icon="✖"></button> <button class="btn buttonYes" form="AskForm" data-bind="click: yesClick, text: yesButton" data-icon="✔"></button> </footer> </template><template id="PopupsLanguages"><header> <a href="#" class="close" data-bind="click: close">×</a> <h3 data-i18n="POPUPS_LANGUAGES/TITLE_LANGUAGES"></h3> </header> <div class="modal-body" style="min-height: 150px;" data-bind="foreach: languages"> <label data-bind="click: function () { $root.changeLanguage(key); }, css: {'selected': selected, 'user': user}, attr: { title: title }, text: fullName"> </label> </div> </template> <script nonce="" type="text/javascript">(doc => {

const
	qUri = path => doc.location.pathname.replace(/\/+$/,'') + '/?/' + path,
	eId = id => doc.getElementById('rl-'+id),
	admin = '1' == eId('app').dataset.admin,
	mimeJSON = 'application/json',

	toggle = div => {
		eId('loading').hidden = true;
		div.hidden = false;
	},
	showError = msg => {
		let div = eId('loading-error');
		div.append(msg);
		toggle(div);
	},

	loadScript = src => src ? new Promise((resolve, reject) => {
			const script = doc.createElement('script');
			script.onload = () => resolve();
			script.onerror = () => reject('Failed loading ' + src);
			script.src = src;
//			script.async = true;
			doc.head.append(script);
		}) : Promise.reject('src is empty');

try {
	let smctoken = doc.cookie.match(/(^|;) ?smctoken=([^;]+)/);
	smctoken = smctoken ? smctoken[2] : localStorage.getItem('smctoken');
	if (!smctoken) {
		let data = new Uint8Array(16);
		crypto.getRandomValues(data);
		smctoken = encodeURIComponent(btoa(String.fromCharCode(...data)));
	}
	localStorage.setItem('smctoken', smctoken);
	doc.cookie = 'smctoken='+smctoken+";path=/;samesite=strict";
} catch (e) {
	console.error(e);
}

let RL_APP_DATA = {};

window.rl = {
	adminArea: () => admin,

	settings: {
		get: name => RL_APP_DATA[name],
		set: (name, value) => RL_APP_DATA[name] = value,
		app: name => RL_APP_DATA.System[name]
	},

	setTitle: title =>
		doc.title = (title || '') + (RL_APP_DATA.title ? (title ? ' - ' : '') + RL_APP_DATA.title : ''),

	setData: appData => {
		RL_APP_DATA = appData;
		rl.app.refresh();
	},

	loadScript: loadScript,

	fetch: (resource, init, postData) => {
		init = Object.assign({
			mode: 'same-origin',
			cache: 'no-cache',
			redirect: 'error',
			referrerPolicy: 'no-referrer',
			credentials: 'same-origin',
			headers: {}
		}, init);
		let asJSON = 1,
			XToken = (RL_APP_DATA.System || {}).token,
			object = {};
		if (postData) {
			init.method = 'POST';
			if (postData instanceof FormData) {
				postData.forEach((value, key) => {
					if (value instanceof File) {
						asJSON = 0;
					} else if (!Reflect.has(object, key)) {
						object[key] = value;
					} else {
						Array.isArray(object[key]) || (object[key] = [object[key]]);
						object[key].push(value);
					}
				});
				if (asJSON) {
					postData = object;
//					postData.XToken = XToken;
				} else {
					XToken && postData.set('XToken', XToken);
				}
			}
			if (asJSON) {
				init.headers['Content-Type'] = mimeJSON;
				postData = JSON.stringify(postData);
			}
			init.body = postData;
		}
		XToken && (init.headers['X-SM-Token'] = XToken);
//		init.headers = new Headers(init.headers);
		return fetch(resource, init);
	},

	fetchJSON: (resource, init, postData) => {
		init = Object.assign({ headers: {} }, init);
		init.headers.Accept = mimeJSON;
		return rl.fetch(resource, init, postData).then(response => {
			if (response.ok) {
				const ct = response.headers.get('Content-Type');
				if (!ct.startsWith(mimeJSON)) {
					return Promise.reject(new Error(`Invalid Content-Type '${ct}' for url '${resource}'`));
				}
				/* TODO: use this for non-developers?
				response.clone()
				let data = response.text();
				try {
					return JSON.parse(data);
				} catch (e) {
					console.error(e);
//					console.log(data);
					return Promise.reject(Notifications.JsonParse);
					return {
						Result: false,
						code: 952, // Notifications.JsonParse
						message: e.message,
						messageAdditional: data
					}
				}
				*/
				return response.json();
			}
			return Promise.reject(new Error('Network response error: ' + response.status));
		});
	}
};

if (!navigator.cookieEnabled) {
	toggle(eId('NoCookie'));
} else if (![].flat) {
	toggle(eId('BadBrowser'));
} else {
	rl.fetchJSON(qUri(`${admin ? 'Admin' : ''}AppData/0/${Math.random().toString().slice(2)}/`))
	.then(appData => {
		RL_APP_DATA = appData;
		const url = appData.StaticLibsJs,
			cb = () => rl.app.bootstart();
		loadScript(url)
			.then(() => loadScript(url.replace('/libs.', `/${admin?'admin':'app'}.`)))
			.then(() => appData.PluginsLink ? loadScript(qUri(appData.PluginsLink)) : Promise.resolve())
			.then(() => rl.app
				? cb()
				: doc.addEventListener('readystatechange', () => 'complete' == doc.readyState && cb())
			)
			.catch(e => {
				showError(e);
				throw e;
			});
	})
	.catch(e => showError(e));
}

})(document);
document.documentElement.lang = 'ru';
rl.I18N={"LANGS_NAMES":{"id":"Bahasa Indonesia","cs":"Čeština","da":"Dansk","de":"Deutsch","en":"English","es":"Español","eu":"Euskara","fr":"Français","it":"Italiano","lt":"Lietuvių","hu":"Magyar","nl":"Nederlands","nb":"Norsk (bokmål)","pl":"Polski","pt":"Português","pt-BR":"Português (Brasil)","sk":"Slovenčina","sl":"Slovenščina","fi":"Suomi","sv":"Svenska","vi":"Tiếng Việt","be":"Беларуская","ru":"Русский","uk":"Українська","fa":"‏فارسی‏","ja":"日本語","zh":"简体中文","zh-TW":"繁體中文(台灣)"},"LANGS_NAMES_EN":{"eu":"Basque","be":"Belarusian","zh":"Chinese Simplified (China)","zh-TW":"Chinese Traditional (Taiwan)","cs":"Czech","da":"Danish","nl":"Dutch","en":"English","fi":"Finnish","fr":"French","de":"German","hu":"Hungarian","id":"Indonesian","it":"Italian","ja":"Japanese","lt":"Lithuanian","nb":"Norwegian Bokmål","fa":"Persian","pl":"Polish","pt":"Portuguese","pt-BR":"Portuguese (Brazil)","ru":"Russian","sk":"Slovak","sl":"Slovenian","es":"Spanish","sv":"Swedish","uk":"Ukrainian","vi":"Vietnamese"},"GLOBAL":{"ADD":"Добавить","CLOSE":"Закрыть","SAVE":"Сохранить","TEST":"Тест","UPDATE":"Обновить","USERNAME":"Имя пользователя","PASSWORD":"Пароль","CANCEL":"Отменить","SEARCH":"Поиск","YES":"Да","NO":"Нет"},"LOGIN":{"LABEL_LOGIN":"Логин","LABEL_TOTP":"TOTP code","BUTTON_LOGIN":"Войти в админ панель"},"TOP_PANEL":{"LABEL_ADMIN_PANEL":"Панель управления администратора"},"SETTINGS_LABELS":{"GENERAL":"Основные","LOGIN":"Логин","BRANDING":"Брендинг","CONTACTS":"Контакты","DOMAINS":"Домены","SECURITY":"Безопасность","PACKAGES":"Плагины","CONFIG":"Файл конфигурации","ABOUT":"О Программе"},"TAB_GENERAL":{"LEGEND_INTERFACE":"Интерфейс","LABEL_LANGUAGE":"Язык","LABEL_LANGUAGE_ADMIN":"Язык (Панели Администратора)","LABEL_THEME":"Темы","LABEL_ALLOW_LANGUAGES_ON_SETTINGS":"Разрешить выбор языка на экране настроек","LABEL_ALLOW_THEMES_ON_SETTINGS":"Разрешить выбор темы на экране настроек","LABEL_ALLOW_BACKGROUND_ON_SETTINGS":"Разрешить выбор фона на экране настроек","LABEL_SHOW_THUMBNAILS":"Показывать миниатюры (для вложений)","LEGEND_MAIN":"Основное","LABEL_ATTACHMENT_SIZE_LIMIT":"Предельный размер вложений","LABEL_ALLOW_ADDITIONAL_ACCOUNTS":"Разрешить дополнительные аккаунты","LABEL_ALLOW_IDENTITIES":"Разрешить множественные профили","ALERT_DATA_ACCESS":"Папка данных SnappyMail доступна. Пожалуйста, настройте свой веб-сервер так, чтобы скрыть папку данных с внешнего доступа. Подробнее здесь:","ALERT_WARNING":"Внимание!","HTML_ALERT_WEAK_PASSWORD":"Вы используете пароль администратора по умолчанию.\n<br>\nПо соображениям безопасности, пожалуйста,\n<strong><a href=\"#/security\">измените пароль</a></strong> прямо сейчас.\n"},"TAB_LOGIN":{"LEGEND_LOGIN_SCREEN":"Страница Входа","LABEL_DEFAULT_DOMAIN":"Основной домен","LABEL_DETERMINE_USER_DOMAIN":"Пытаться определить домен пользователя","LABEL_ALLOW_LANGUAGES_ON_LOGIN":"Разрешить выбор языка на странице входа","LABEL_DETERMINE_USER_LANGUAGE":"Пытаться определить язык пользователя"},"TAB_BRANDING":{"LEGEND_BRANDING":"Брендинг","LABEL_PAGE_TITLE":"Название страницы","LABEL_LOADING_DESCRIPTION":"Описание при загрузке","LABEL_FAVICON_URL":"Иконка (favicon)"},"TAB_CONTACTS":{"LEGEND_CONTACTS":"Контакты","LEGEND_STORAGE":"Хранилище (PDO)","LABEL_ENABLE_CONTACTS":"Включить контакты","LABEL_ALLOW_SYNC":"Разрешить синхронизацию контактов (с внешним CardDAV сервером)","LABEL_STORAGE_TYPE":"Тип","LABEL_STORAGE_DSN":"Dsn","LABEL_STORAGE_USER":"Пользователь","LABEL_STORAGE_PASSWORD":"Пароль","SQLITE_GLOBAL":"Use a global DB instead of per account","ALERT_NOTICE":"Внимание!","SUGGESTIONS_LIMIT":"Лимит предложений","HTML_ALERT_DO_NOT_USE_THIS_DATABASE":"Не используйте этот тип базы данных с большим числом активных пользователей.","HTML_ALERT_DOES_NOT_SUPPORTED":"Ваша система не поддерживает контакты.\n<br>\nВам необходимо установить или включить <strong>PDO (SQLite / MySQL / PostgreSQL)</strong> расширения на вашем сервере.\n"},"TAB_DOMAINS":{"LEGEND_DOMAINS":"Домены","BUTTON_ADD_DOMAIN":"Добавить домен","BUTTON_ADD_ALIAS":"Добавить псевдоним","DELETE_ARE_YOU_SURE":"Вы уверены?","HTML_DOMAINS_HELPER":"Список доменов к которым разрешен доступ.\n<br>\nНажмите на имя, чтобы настроить домен.\n"},"TAB_SECURITY":{"LEGEND_SECURITY":"Безопасность","LABEL_USE_IMAGE_PROXY":"Использовать локальный прокси для внешних изображений","LABEL_AUTO_VERIFY":"Verify signatures automatically","LABEL_SHOW_PHP_INFO":"Показать PHP информацию","LEGEND_ADMIN_PANEL_ACCESS_CREDENTIALS":"Учетные данные для доступа к панели администратора","LABEL_CURRENT_PASSWORD":"Текущий пароль","LABEL_NEW_PASSWORD":"Новый пароль","LABEL_REPEAT_PASSWORD":"Повторить пароль","LABEL_REQUIRE_VERIFICATION":"Требовать проверку SSL сертификата для","CRYPTO":"Шифрование","LABEL_ALLOW_SELF_SIGNED":"Разрешить самоподписанные сертификаты"},"TAB_PACKAGES":{"LABEL_ENABLE_PLUGINS":"Включить плагины","LEGEND_AVAILABLE_FOR_UPDATE":"Доступно для обновления","LEGEND_AVAILABLE_FOR_INSTALLATION":"Доступно для установки","LEGEND_INSTALLED_PACKAGES":"Установленные пакеты","ALERT_CANNOT_ACCESS_REPOSITORY":"Не удается получить доступ к хранилищу пакетов в данный момент."},"TAB_ABOUT":{"LEGEND_ABOUT":"О программе","LABEL_TAG_HINT":"Простой, современный и быстрый веб-клиент электронной почты\n","LABEL_ALL_RIGHTS_RESERVED":"Все права защищены.","HINT_READ_CHANGE_LOG":"Пожалуйста, ознакомьтесь с изменениями перед обновлением.\n","HINT_IS_UP_TO_DATE":"Версия SnappyMail актуальна.","HTML_NEW_VERSION":"Новая <b>%VERSION%</b> версия доступна.","LABEL_UPDATING":"Обновление","LABEL_CHECKING":"Проверка","BUTTON_RELEASES":"Релизы"},"POPUPS_DOMAIN_ALIAS":{"TITLE_ADD_DOMAIN_ALIAS":"Добавить псевдоним","LABEL_ALIAS":"Псевдоним","LABEL_DOMAIN":"Домен"},"POPUPS_DOMAIN":{"TITLE_ADD_DOMAIN":"Добавить домен","TITLE_ADD_DOMAIN_WITH_NAME":"Добавить домен \"%NAME%\"","TITLE_EDIT_DOMAIN":"Редактировать домен \"%NAME%\"","LABEL_NAME":"Имя","NAME_HELPER":"шаблоны поддерживаются","LABEL_SERVER":"Сервер","LABEL_PORT":"Порт","LABEL_SECURE":"Безопасность","TIMEOUT":"Тайм-аут","DISABLE_CAPABILITIES":"Отключить функции","LIMITS":"Лимиты","FOLDERS":"Папки","MESSAGES":"Сообщения","SECURE_OPTION_NONE":"Нет","LABEL_ALLOW_SIEVE_SCRIPTS":"Разрешить Sieve сценарии","LABEL_USE_SHORT_LOGIN":"Использовать короткий логин","LABEL_LOWERCASE_LOGIN":"Lowercase login (case-insensitive)","LABEL_USE_AUTH":"Использовать аутентификацию","LABEL_SET_SENDER":"Использовать логин в качестве отправителя","LABEL_AUTH_PLAIN_LINE":"Принудительный вход командой AUTH PLAIN","LABEL_USE_PHP_MAIL":"Использовать mail() функцию","BUTTON_WHITE_LIST":"Белый список","NEW_DOMAIN_DESC":"Эта конфигурация позволит вам работать с <strong>%NAME%</strong> адресами.","WHITE_LIST_ALERT":"Список пользователей домена к которым разрешен доступ.\nИспользуйте пробел в качестве разделителя.\n","VALID_SPAM_HEADERS":"Valid SPAM headers","VALID_VIRUS_HEADERS":"Valid virus headers"},"POPUPS_PLUGIN":{"TITLE_PLUGIN":"Плагин","DESC_NOTHING_TO_CONFIGURE":"Без настроек"},"POPUPS_ASK":{"DESC_WANT_CLOSE_THIS_WINDOW":"Вы уверены, что хотите закрыть это окно?"},"POPUPS_LANGUAGES":{"TITLE_LANGUAGES":"Выберите язык"},"HINTS":{"BETA":"beta","WARNING":"Внимание!"},"ERRORS":{"DOMAIN_ALREADY_EXISTS":"Домен уже существует","UNKNOWN_ERROR":"Неизвестная ошибка"},"NOTIFICATIONS":{"RequestError":"Запрос не выполнен","RequestAborted":"Запрос прерван","RequestTimeout":"Истекло время запроса","InvalidToken":"Неверный токен запроса","AuthError":"Не удалось авторизоваться","DomainAlreadyExists":"Домен уже существует","CantSavePluginSettings":"Не могу сохранить настройки","CantInstallPackage":"Ошибка установки плагина","CantDeletePackage":"Ошибка удаления плагина","InvalidPluginPackage":"Ошибка пакета плагина","UnsupportedPluginPackage":"Для работы плагина необходима полная поддержка сервера","UnknownError":"Неизвестная ошибка"},"NEXTCLOUD":{"SAVE_ATTACHMENTS":"Сохранить в F7","SAVE_EML":"Сохранить как .eml в F7","SAVE_ICS":"Вставить в календарь","SELECT_FOLDER":"Выбрите папку","SELECT_FILES":"Выберите файл(ы)","ATTACH_FILES":"Прикрепить файлы из Nextcloud","SELECT_CALENDAR":"Выбрать календарь","FILE_ATTACH":"Прикрепить с ПК","FILE_INTERNAL":"Внутреняя","FILE_PUBLIC":"Публичная"}};
rl.relativeTime = {
	year: {
		past: {
			one: "{0} год назад",
			many: "{0} лет назад",
			other: "{0} года назад"
		},
		future: {
			one: "через {0} год",
			many: "через {0} лет",
			other: "через {0} года"
		}
	},
	month: {
		past: {
			one: "{0} месяц назад",
			many: "{0} месяцев назад",
			other: "{0} месяца назад"
		},
		future: {
			one: "через {0} месяц",
			many: "через {0} месяцев",
			other: "через {0} месяца"
		}
	},
	week: {
		past: {
			one: "{0} неделю назад",
			many: "{0} недель назад",
			other: "{0} недели назад"
		},
		future: {
			one: "через {0} неделю",
			many: "через {0} недель",
			other: "через {0} недели"
		}
	},
	day: {
		past: {
			one: "{0} день назад",
			many: "{0} дней назад",
			other: "{0} дня назад"
		},
		future: {
			one: "через {0} день",
			many: "через {0} дней",
			other: "через {0} дня"
		}
	},
	hour: {
		past: {
			one: "{0} час назад",
			many: "{0} часов назад",
			other: "{0} часа назад"
		},
		future: {
			one: "через {0} час",
			many: "через {0} часов",
			other: "через {0} часа"
		}
	},
	minute: {
		past: {
			one: "{0} минуту назад",
			many: "{0} минут назад",
			other: "{0} минуты назад"
		},
		future: {
			one: "через {0} минуту",
			many: "через {0} минут",
			other: "через {0} минуты"
		}
	},
	second: {
		past: {
			one: "{0} секунду назад",
			many: "{0} секунд назад",
			other: "{0} секунды назад"
		},
		future: {
			one: "через {0} секунду",
			many: "через {0} секунд",
			other: "через {0} секунды"
		}
	},
	plural: n => 1 == n ? 'one' : 'other'
}
;</script> </body> </html>