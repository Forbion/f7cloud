{"version":3,"file":"apps_files_sharing_src_views_PublicAuthPrompt_vue-apps_files_sharing_src_views_PublicAuthPrompt_vue.js?v=2fd3a326c663970f280e","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAkBA;AACA;;;;;;;;;;;;;;;ACvCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///nextcloud/apps/files_sharing/src/services/GuestNameValidity.ts","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?51dc","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?39fc","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?102e","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue?vue&type=script&lang=ts","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue?vue&type=template&id=4bbba25b&scoped=true","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue?vue&type=style&index=0&id=4bbba25b&scoped=true&lang=scss","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?a0b0"],"sourcesContent":["/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { InvalidFilenameError, InvalidFilenameErrorReason, validateFilename } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\n/**\n * Get the validity of a filename (empty if valid).\n * This can be used for `setCustomValidity` on input elements\n * @param name The filename\n * @param escape Escape the matched string in the error (only set when used in HTML)\n */\nexport function getGuestNameValidity(name) {\n  let escape = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (name.trim() === '') {\n    return t('files', 'Filename must not be empty.');\n  }\n  if (name.startsWith('.')) {\n    return t('files', 'Names must not start with a dot.');\n  }\n  try {\n    validateFilename(name);\n    return '';\n  } catch (error) {\n    if (!(error instanceof InvalidFilenameError)) {\n      throw error;\n    }\n    switch (error.reason) {\n      case InvalidFilenameErrorReason.Character:\n        return t('files', '\"{char}\" is not allowed inside a name.', {\n          char: error.segment\n        }, undefined, {\n          escape\n        });\n      case InvalidFilenameErrorReason.ReservedName:\n        return t('files', '\"{segment}\" is a reserved name and not allowed.', {\n          segment: error.segment\n        }, undefined, {\n          escape: false\n        });\n      case InvalidFilenameErrorReason.Extension:\n        if (error.segment.match(/\\.[a-z]/i)) {\n          return t('files', '\"{extension}\" is not an allowed name.', {\n            extension: error.segment\n          }, undefined, {\n            escape: false\n          });\n        }\n        return t('files', 'Names must not end with \"{extension}\".', {\n          extension: error.segment\n        }, undefined, {\n          escape: false\n        });\n      default:\n        return t('files', 'Invalid name.');\n    }\n  }\n}","import { render, staticRenderFns } from \"./PublicAuthPrompt.vue?vue&type=template&id=4bbba25b&scoped=true\"\nimport script from \"./PublicAuthPrompt.vue?vue&type=script&lang=ts\"\nexport * from \"./PublicAuthPrompt.vue?vue&type=script&lang=ts\"\nimport style0 from \"./PublicAuthPrompt.vue?vue&type=style&index=0&id=4bbba25b&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bbba25b\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/var/www/nextcloud/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4bbba25b')) {\n      api.createRecord('4bbba25b', component.options)\n    } else {\n      api.reload('4bbba25b', component.options)\n    }\n    module.hot.accept(\"./PublicAuthPrompt.vue?vue&type=template&id=4bbba25b&scoped=true\", function () {\n      api.rerender('4bbba25b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/files_sharing/src/views/PublicAuthPrompt.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=script&lang=ts\"","export * from \"-!../../../../node_modules/style-loader/dist/cjs.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=style&index=0&id=4bbba25b&scoped=true&lang=scss\"","export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=template&id=4bbba25b&scoped=true\"","import { defineComponent } from 'vue';\nimport { loadState } from '@nextcloud/initial-state';\nimport { t } from '@nextcloud/l10n';\nimport NcDialog from '@nextcloud/vue/components/NcDialog';\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard';\nimport NcTextField from '@nextcloud/vue/components/NcTextField';\nimport { getGuestNameValidity } from \"../services/GuestNameValidity\";\nexport default defineComponent({\n  name: 'PublicAuthPrompt',\n  components: {\n    NcDialog,\n    NcNoteCard,\n    NcTextField\n  },\n  props: {\n    /**\n     * Preselected nickname\n     * @default '' No name preselected by default\n     */\n    nickname: {\n      type: String,\n      default: ''\n    }\n  },\n  setup() {\n    return {\n      t,\n      owner: loadState('files_sharing', 'owner', ''),\n      ownerDisplayName: loadState('files_sharing', 'ownerDisplayName', ''),\n      label: loadState('files_sharing', 'label', ''),\n      note: loadState('files_sharing', 'note', ''),\n      filename: loadState('files_sharing', 'filename', '')\n    };\n  },\n  data() {\n    return {\n      name: ''\n    };\n  },\n  computed: {\n    dialogName() {\n      return this.t('files_sharing', 'Upload files to {folder}', {\n        folder: this.label || this.filename\n      });\n    },\n    dialogButtons() {\n      return [{\n        label: t('files_sharing', 'Submit name'),\n        type: 'primary',\n        nativeType: 'submit'\n      }];\n    }\n  },\n  watch: {\n    /** Reset name to pre-selected nickname (e.g. Talk / Collabora ) */\n    nickname: {\n      handler() {\n        this.name = this.nickname;\n      },\n      immediate: true\n    },\n    name() {\n      // Check validity of the new name\n      const newName = this.name.trim?.() || '';\n      const input = this.$refs.input?.$el.querySelector('input');\n      if (!input) {\n        return;\n      }\n      const validity = getGuestNameValidity(newName);\n      input.setCustomValidity(validity);\n      input.reportValidity();\n    }\n  }\n});","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c,\n    _setup = _vm._self._setupProxy;\n  return _c(\"NcDialog\", {\n    staticClass: \"public-auth-prompt\",\n    attrs: {\n      buttons: _vm.dialogButtons,\n      \"data-cy-public-auth-prompt-dialog\": \"\",\n      \"is-form\": \"\",\n      \"can-close\": false,\n      name: _vm.dialogName\n    },\n    on: {\n      submit: function ($event) {\n        return _vm.$emit(\"close\", _vm.name);\n      }\n    }\n  }, [_vm.owner ? _c(\"p\", {\n    staticClass: \"public-auth-prompt__subtitle\"\n  }, [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.t(\"files_sharing\", \"{ownerDisplayName} shared a folder with you.\", {\n    ownerDisplayName: _vm.ownerDisplayName\n  })) + \"\\n\\t\")]) : _vm._e(), _vm._v(\" \"), _c(\"NcNoteCard\", {\n    staticClass: \"public-auth-prompt__header\",\n    attrs: {\n      text: _vm.t(\"files_sharing\", \"To upload files, you need to provide your name first.\"),\n      type: \"info\"\n    }\n  }), _vm._v(\" \"), _c(\"NcTextField\", {\n    ref: \"input\",\n    staticClass: \"public-auth-prompt__input\",\n    attrs: {\n      \"data-cy-public-auth-prompt-dialog-name\": \"\",\n      label: _vm.t(\"files_sharing\", \"Name\"),\n      placeholder: _vm.t(\"files_sharing\", \"Enter your name\"),\n      minlength: \"2\",\n      name: \"name\",\n      required: \"\",\n      value: _vm.name\n    },\n    on: {\n      \"update:value\": function ($event) {\n        _vm.name = $event;\n      }\n    }\n  })], 1);\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\nexport { render, staticRenderFns };","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.public-auth-prompt__subtitle[data-v-4bbba25b] {\n  font-size: 1.25em;\n  margin-block: 0 calc(3 * var(--default-grid-baseline));\n}\n.public-auth-prompt__header[data-v-4bbba25b] {\n  margin-block: 0 calc(3 * var(--default-grid-baseline));\n}\n.public-auth-prompt__input[data-v-4bbba25b] {\n  margin-block: calc(4 * var(--default-grid-baseline)) calc(2 * var(--default-grid-baseline));\n}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=style&index=0&id=4bbba25b&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=style&index=0&id=4bbba25b&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}